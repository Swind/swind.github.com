{"THEME_REVEAL_CONGIF_TRANSITION": "cube", "message_Previous post": "Previous post", "LICENSE": "\n<a rel=\"license\" href=\"http://creativecommons.org/licenses/by-nc-sa/2.5/ar/\">\n<img alt=\"Creative Commons License BY-NC-SA\"\nstyle=\"border-width:0; margin-bottom:12px;\"\nsrc=\"http://i.creativecommons.org/l/by-nc-sa/2.5/ar/88x31.png\"></a>", "text": "<html><body><p>HTML Parser\u51fa\u9580\u5728\u5916,\u5c45\u5bb6\u65c5\u904a\u5fc5\u5099\u826f\u54c1\u3002\u7121\u8ad6\u662f\u8981\u81ea\u52d5\u4e0b\u8f09\u6f2b\u756b\u3001\u7a2e\u5b50\u6216\u8005\u662f\u505a\u500b\u81ea\u52d5\u5929\u6c23\u5657\u6d6a\u6a5f\u5168\u90fd\u9700\u8981\u4ed6\u3002\n\u70ba\u4e86\u8981\u5f9e\u7db2\u9801\u4e2d\u53ef\u4ee5\u53d6\u51fa\u5167\u5bb9,\u6211\u66fe\u7d93\u7528\u904e\u4e0d\u5c11\u65b9\u5f0f,\u5305\u62ec\u76f4\u63a5\u786c\u5e79\u7528\u5b57\u4e32\u641c\u5c0b\u3001\u4fee\u6539Scala\u672c\u8eab\u5167\u90e8\u7684XML Parser\u7b49\u3002\n\u4f46\u662f\u4e00\u76f4\u90fd\u627e\u4e0d\u5230\u4e00\u500b\u6eff\u610f\u53c8\u9806\u624b\u7684\u89e3\u6c7a\u65b9\u5f0f,\u4e00\u76f4\u5230\u5f8c\u4f86\u5728 <a class=\"reference external\" href=\"http://www.oschina.net/\">CSDN</a> \u6c92\u932f\u5c31\u662f\u90a3\u500b\u5927\u9678\u7db2\u7ad9 <a class=\"reference external\" href=\"http://www.oschina.net/\">CSDN</a>\n(\u96d6\u7136\u8aaaCSDN\u8a0a\u606f\u592a\u591a\u592a\u96dc\u4e82,\u4f46\u662f\u5076\u723e\u9084\u662f\u53ef\u4ee5\u770b\u5230\u4e00\u4e9b\u4e0d\u932f\u7684\u6771\u897f),\u624d\u627e\u5230jsoup\u9019\u500blibrary\u3002</p>\n<p><a class=\"reference external\" href=\"http://jsoup.org/\">jsoup\u7684\u5b98\u65b9\u7db2\u7ad9</a></p>\n<p><a class=\"reference external\" href=\"http://jsoup.org/cookbook/\">jsoup\u7684\u6559\u5b78\u6587\u4ef6</a></p>\n<!-- TEASER_END -->\n<p>\u4f46\u662f\u5176\u5be6\u6700\u91cd\u8981\u7684\u662f\u9019\u4e00 <a class=\"reference external\" href=\"http://jsoup.org/cookbook/extracting-data/selector-syntax\">\u6559\u5b78\u6587\u4ef6</a> ,\u4ecb\u7d39\u4e86\u4ed6\u8207\u5225\u4eba\u6700\u4e0d\u4e00\u6a23\u7684\u7684\u5730\u65b9\u3002\n\u4e00\u822c\u7684html parser\u9084\u662f\u6bd4\u8f03\u50be\u5411\u65bc\u8ddfxml parser\u7684\u4f5c\u6cd5\u4e00\u6a23,\u628ahtml\u5206\u6790\u5b8c\u4e4b\u5f8c\u5efa\u6210\u6a39\n\u7136\u5f8c\u64cd\u4f5cnode\u5c07\u8cc7\u6599\u53d6\u51fa,\u4f46\u662f\u9664\u4e86\u9019\u7a2e\u64cd\u4f5c\u65b9\u5f0f\u4e4b\u5916josue\u9084\u6709\u4e00\u7a2e\u662f\u985e\u4f3cjquery\u7684selector\u7684\u64cd\u4f5c\u65b9\u5f0f\u3002</p>\n<pre class=\"code scala literal-block\">\n<span class=\"n\">file</span> <span class=\"n\">input</span> <span class=\"k\">=</span> <span class=\"k\">new</span> <span class=\"n\">file</span><span class=\"o\">(</span><span class=\"s\">\"/tmp/input.html\"</span><span class=\"o\">);</span>\n<span class=\"n\">document</span> <span class=\"n\">doc</span> <span class=\"k\">=</span> <span class=\"n\">jsoup</span><span class=\"o\">.</span><span class=\"n\">parse</span><span class=\"o\">(</span><span class=\"n\">input</span><span class=\"o\">,</span> <span class=\"s\">\"utf-8\"</span><span class=\"o\">,</span> <span class=\"s\">\"http://example.com/\"</span><span class=\"o\">);</span>\n\n<span class=\"c1\">//document doc = jsoup.connect(\"http://example.com/\");\n</span>\n<span class=\"c1\">//\u53d6\u51fa\u64c1\u6709herf\u5c6c\u6027\u7684&lt;a&gt;\n</span><span class=\"n\">elements</span> <span class=\"n\">links</span> <span class=\"k\">=</span> <span class=\"n\">doc</span><span class=\"o\">.</span><span class=\"n\">select</span><span class=\"o\">(</span><span class=\"s\">\"a[href]\"</span><span class=\"o\">);</span>\n<span class=\"c1\">//\u53d6\u51fa\u64c1\u6709src\u5c6c\u6027\u4e14\u503c\u662f\u4ee5png\u7d50\u5c3e\u7684&lt;img&gt;\n</span><span class=\"n\">elements</span> <span class=\"n\">pngs</span> <span class=\"k\">=</span> <span class=\"n\">doc</span><span class=\"o\">.</span><span class=\"n\">select</span><span class=\"o\">(</span><span class=\"s\">\"img[src$=.png]\"</span><span class=\"o\">);</span>\n</pre>\n<p>\u4e0a\u9762\u662f\u5b98\u7db2\u7684\u7bc4\u4f8b,\u5f9e\u9019\u908a\u5c31\u53ef\u4ee5\u770b\u5230 jsoup \u4e0d\u540c\u65bc\u4e00\u822chtml parser\u7684\u5730\u65b9\u3002\njsoup\u9664\u4e86\u6709\u652f\u63f4\u8b80\u53d6\u6a94\u6848\u4e4b\u5916,\u4e5f\u53ef\u4ee5\u76f4\u63a5\u8f38\u5165\u7db2\u5740\u8b93\u4ed6\u81ea\u5df1\u53bb\u9023\u7dda\u8207parser,\n\u6700\u91cd\u8981\u7684\u662f\u53ef\u4ee5\u900f\u904eselector-syntax\u4f86\u53d6\u51fa\u60f3\u8981\u7684\u5167\u5bb9\u3002\u63a5\u4e0b\u4f86\u6211\u6703\u6574\u7406\u4e00\u4e9b\u6211\u5e38\u7528\u7684\u7528\u6cd5\u3002</p>\n<p>p.s\u6211\u6240\u4f7f\u7528\u7684\u8a9e\u8a00\u662fscala\uff0c\u4f46\u662f\u6211\u6703\u76e1\u91cf\u4e0d\u8981\u7528scala\u7684&lt;del&gt;\u5947\u6deb\u6280\u5de7&lt;/del&gt;\u7279\u6b8a\u8a9e\u6cd5\u8b93\u4ed6\u770b\u8d77\u4f86\u8ddfjava\u5dee\u4e0d\u591a\u3002</p>\n<p>\u51fa\u767c\u7e3d\u8981\u6709\u500b\u65b9\u5411,\u9019\u908a\u5c31\u4ee5\u4e00\u500b\u6211\u60f3\u5e79\u7684\u58de\u4e8b\u60c5\u4f86\u7576\u4f5c\u4f8b\u5b50\u597d\u4e86\uff0c\u9806\u4fbf\u5f37\u8feb\u6211\u81ea\u5df1\u628a\u6771\u897f\u5beb\u5b8c\u3002</p>\n<div class=\"section\" id=\"id3\">\n<h2>\u8aaa\u51fa\u4f60\u7684\u9858\u671b\uff0c\u5426\u5247\u4e0d\u6703\u8b93\u4f60\u5982\u9858</h2>\n<p>\u6211\u60f3\u8981\u4e00\u500b\u53ef\u4ee5\u81ea\u52d5\u6aa2\u67e5 <a class=\"reference external\" href=\"http://www.cwb.gov.tw/v7/forecast/taiwan/taipei_city.htm\">\u67d0\u5927\u8ad6\u58c7</a> \u7684\u52d5\u756b\u8a0e\u8ad6\u5340\u65b0\u756a\u662f\u5426\u6709\u66f4\u65b0\u7684\u6a5f\u5668\u4eba\u3002\n\uff08\u56e0\u70ba\u5b83\u65b0\u756a\u66f4\u65b0\u5728\u540c\u4e00\u500b\u6587\u7ae0\u88e1\u9762\uff0c\u6bcf\u5468\u627e\u65b0\u756a\u771f\u7684\u597d\u9ebb\u7169\uff09</p>\n<p>\u54c8\u5229\u8def\u4e9e ! chance !</p>\n<div class=\"section\" id=\"prepare\">\n<h3>Prepare</h3>\n<p>\u9996\u5148\u5462\uff0c\u6211\u7fd2\u6163\u5148\u5c07\u7db2\u9801\u5167\u5bb9\u5132\u5b58\u6210html\u6a94\u6848,\u653e\u5230\u6e2c\u8a66\u8cc7\u6599\u593e\u4e2d\u3002\n\u7136\u5f8c\uff0c\u5beb\u500b\u6e2c\u8a66\u5148\u6c7a\u5b9a\u6574\u500b\u7a0b\u5f0f\u7684\u4e3b\u8981\u4ecb\u9762\u3002\n\u56e0\u70ba\u6211\u4e0d\u559c\u6b61\u4e00\u76f4\u9023\u7dda\u5230\u7db2\u7ad9\u505a\u6e2c\u8a66\u3002\n\u56e0\u70ba:</p>\n<ol class=\"arabic\">\n<li><p class=\"first\">\u6d6a\u8cbb\u6d41\u91cf</p>\n</li>\n<li><dl class=\"first docutils\">\n<dt>\u6211\u8981\u9a57\u8b49\u7a0b\u5f0f\u57f7\u884c\u7d50\u679c\u7684\u6642\u5019\u5fc5\u9808\u8981\u958b\u7db2\u9801\u624d\u80fd\u9a57\u8b49\u3002</dt>\n<dd><p class=\"first last\">(\u56e0\u70ba\u6587\u7ae0\u6703\u4e00\u76f4\u65b0\u589e\u7b2c\u4e00\u9801\u7684\u5167\u5bb9\u6703\u88ab\u64e0\u5230\u5f8c\u9762\u53bb)</p>\n</dd>\n</dl>\n</li>\n<li><p class=\"first\">\u4f60\u4e0d\u4e00\u5b9a\u96a8\u6642\u90fd\u6709\u7db2\u8def\u53ef\u4ee5\u7528</p>\n</li>\n</ol>\n<p>\u56e0\u6b64\u5148\u5c07\u4eca\u5929\u7684\u6587\u7ae0\u5217\u8868\u5132\u5b58\u8d77\u4f86\uff0c\u7136\u5f8c\u5beb\u500b\u6e2c\u8a66\u4f86\u9a57\u8b49\u6211\u6700\u5f8c\u7684\u8f38\u51fa\u7d50\u679c\u662f\u5426\u5982\u6211\u6240\u9810\u671f\u3002\n\u6709\u4eba\u6703\u60f3\u8aaa\u9019\u662f\u4e0d\u662f\u4ec0\u9ebc\u8edf\u9ad4\u5de5\u7a0b\u6280\u5de7\u963f\uff0c\u662f\u4e0d\u662f\u4ec0\u9ebc\u6e2c\u8a66\u5148\u884c\uff08tdd\uff09\u7684\u958b\u767c\u65b9\u5f0f\u4e4b\u985e\u7684\uff1f\n\u5176\u5be6\u4e5f\u6c92\u6709\u7279\u5225\u60f3\u8aaa\u8981\u4f7f\u7528\u4ec0\u9ebc\u6a23\u7684\u958b\u767c\u65b9\u5f0f\u6216\u958b\u767c\u6280\u5de7\uff0c\u55ae\u7d14\u5c31\u53ea\u662f\u56e0\u70ba\u6211\u89ba\u5f97\u9019\u6a23\u6bd4\u8f03\u65b9\u4fbf\u800c\u5df2\u3002\n\u6211\u89ba\u5f97\u6c92\u6709\u5fc5\u8981\u88ab\u5049\u5927\u6216\u8005\u662f\u53ea\u8981\u9019\u6a23\u505a\u5c31\u5c0d\u4e86\u7b49\u53e3\u865f\u7d66\u8ff7\u60d1\uff0c\u9078\u64c7\u81ea\u5df1\u9700\u8981\u4e14\u8db3\u5920\u7684\u65b9\u5f0f\u5c31\u597d\u4e86\u3002</p>\n</div>\n</div>\n<div class=\"section\" id=\"id5\">\n<h2>\u8981\u5206\u6790\u64f7\u53d6\u7684\u7db2\u9801\u5167\u5bb9</h2>\n<p>\u9019\u908a\u662f\u7db2\u9801\u7684\u90e8\u4efd\u5167\u5bb9\uff0c\u6211\u5728\u505a\u6e2c\u8a66\u8cc7\u6599\u7684\u6642\u5019\u662f\u5c07\u6574\u4efd\u7684\u7db2\u9801\u539f\u59cb\u78bc\u90fd\u5132\u5b58\u8d77\u4f86\uff0c\u4e0b\u9762\u7684\u5167\u5bb9\u662f\u70ba\u4e86\u5f8c\u9762\u7684\u8aaa\u660e\u9700\u8981\u3002</p>\n<pre class=\"code html literal-block\">\n<span class=\"nt\">&lt;tbody</span> <span class=\"na\">id=</span><span class=\"s\">\"normalthread_6961970\"</span><span class=\"nt\">&gt;</span>\n <span class=\"nt\">&lt;tr</span> <span class=\"na\">onmouseover=</span><span class=\"s\">\"l_pic_6961970.style.display='block'\"</span> <span class=\"na\">onmouseout=</span><span class=\"s\">\"l_pic_6961970.style.display='none'\"</span><span class=\"nt\">&gt;</span>\n  <span class=\"nt\">&lt;td</span> <span class=\"na\">class=</span><span class=\"s\">\"folder\"</span><span class=\"nt\">&gt;</span>\n    <span class=\"nt\">&lt;a</span> <span class=\"na\">href=</span><span class=\"s\">\"viewthread.php?tid=6961970&amp;amp;extra=page%3d1%26amp%3borderby%3ddateline\"</span> <span class=\"na\">title=</span><span class=\"s\">\"\u65b0\u7a97\u53e3\u6253\u958b\"</span> <span class=\"na\">target=</span><span class=\"s\">\"_blank\"</span><span class=\"nt\">&gt;</span>\n        <span class=\"nt\">&lt;img</span> <span class=\"na\">src=</span><span class=\"s\">\"images/default/folder_new.gif\"</span> <span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;/a&gt;</span>\n <span class=\"nt\">&lt;/td&gt;</span>\n  <span class=\"nt\">&lt;td</span> <span class=\"na\">class=</span><span class=\"s\">\"icon\"</span><span class=\"nt\">&gt;&lt;img</span> <span class=\"na\">src=</span><span class=\"s\">\"http://a18.file-static.com/attachments/lib_picture/19/70/6961970.jpg\"</span> <span class=\"na\">width=</span><span class=\"s\">\"50\"</span> <span class=\"na\">height=</span><span class=\"s\">\"40\"</span> <span class=\"na\">class=</span><span class=\"s\">\"l_bpic\"</span> <span class=\"nt\">/&gt;</span>\n   <span class=\"nt\">&lt;div</span> <span class=\"na\">class=</span><span class=\"s\">\"l_spic\"</span> <span class=\"na\">id=</span><span class=\"s\">\"l_pic_6961970\"</span><span class=\"nt\">&gt;</span>\n    <span class=\"nt\">&lt;img</span> <span class=\"na\">src=</span><span class=\"s\">\"http://a18.file-static.com/attachments/lib_picture/19/70/6961970.jpg\"</span> <span class=\"na\">width=</span><span class=\"s\">\"100\"</span> <span class=\"na\">height=</span><span class=\"s\">\"80\"</span> <span class=\"na\">class=</span><span class=\"s\">\"l_bpic\"</span> <span class=\"nt\">/&gt;</span>\n   <span class=\"nt\">&lt;/div&gt;&lt;/td&gt;</span>\n  <span class=\"nt\">&lt;th</span> <span class=\"na\">class=</span><span class=\"s\">\"subject new\"</span><span class=\"nt\">&gt;</span>\n    <span class=\"nt\">&lt;label&gt;</span><span class=\"ni\">&amp;nbsp;</span><span class=\"nt\">&lt;/label&gt;</span>\n    <span class=\"nt\">&lt;em&gt;</span>[<span class=\"nt\">&lt;a</span> <span class=\"na\">href=</span><span class=\"s\">\"forumdisplay.php?fid=22&amp;amp;filter=type&amp;amp;typeid=2\"</span><span class=\"nt\">&gt;</span>\u5206\u4eab<span class=\"nt\">&lt;/a&gt;</span>]<span class=\"nt\">&lt;/em&gt;</span>\n    <span class=\"nt\">&lt;span</span> <span class=\"na\">id=</span><span class=\"s\">\"thread_6961970\"</span><span class=\"nt\">&gt;</span>\n        <span class=\"nt\">&lt;a</span> <span class=\"na\">href=</span><span class=\"s\">\"viewthread.php?tid=6961970&amp;amp;extra=page%3d1%26amp%3borderby%3ddateline\"</span><span class=\"nt\">&gt;</span>\n        (mu@\u7e41\u9ad4@rmvb)onepiece\u6d77\u8cca\u738b \u7b2c521\u8a71 (1p)<span class=\"nt\">&lt;/a&gt;</span>\n    <span class=\"nt\">&lt;/span&gt;</span>\n  <span class=\"nt\">&lt;/th&gt;</span>\n  <span class=\"nt\">&lt;td</span> <span class=\"na\">class=</span><span class=\"s\">\"author\"</span><span class=\"nt\">&gt;&lt;cite&gt;&lt;a</span> <span class=\"na\">href=</span><span class=\"s\">\"space.php?uid=933315\"</span><span class=\"nt\">&gt;</span>likesea<span class=\"nt\">&lt;/a&gt;&lt;/cite&gt;&lt;em&gt;</span>2011-10-30<span class=\"nt\">&lt;/em&gt;&lt;/td&gt;</span>\n  <span class=\"nt\">&lt;td</span> <span class=\"na\">class=</span><span class=\"s\">\"nums\"</span><span class=\"nt\">&gt;&lt;strong&gt;</span>0<span class=\"nt\">&lt;/strong&gt;</span>/<span class=\"nt\">&lt;em&gt;</span>2<span class=\"nt\">&lt;/em&gt;&lt;/td&gt;</span>\n  <span class=\"nt\">&lt;td</span> <span class=\"na\">class=</span><span class=\"s\">\"lastpost\"</span><span class=\"nt\">&gt;</span>\n  <span class=\"nt\">&lt;cite&gt;</span>\n    <span class=\"nt\">&lt;a</span> <span class=\"na\">href=</span><span class=\"s\">\"space.php?username=likesea\"</span><span class=\"nt\">&gt;</span>likesea<span class=\"nt\">&lt;/a&gt;</span>\n  <span class=\"nt\">&lt;/cite&gt;</span>\n  <span class=\"nt\">&lt;em&gt;&lt;a</span> <span class=\"na\">href=</span><span class=\"s\">\"redirect.php?tid=6961970&amp;amp;goto=lastpost#lastpost\"</span><span class=\"nt\">&gt;&lt;span</span> <span class=\"na\">title=</span><span class=\"s\">\"2011-10-30 03:13 pm\"</span><span class=\"nt\">&gt;</span>1<span class=\"ni\">&amp;nbsp;</span>\u5206\u9418\u524d<span class=\"nt\">&lt;/span&gt;&lt;/a&gt;&lt;/em&gt;&lt;/td&gt;</span>\n <span class=\"nt\">&lt;/tr&gt;</span>\n<span class=\"nt\">&lt;/tbody&gt;</span>\n</pre>\n<p>\u60f3\u8981\u7684\u8f38\u51fa\u7d50\u679c</p>\n<pre class=\"literal-block\">\nuid       : 933315\ntitle     : onepiece\u6d77\u8cca\u738b \u7b2c521\u8a71\nauthor    : likesea\nlink      : http://.............\n</pre>\n<div class=\"section\" id=\"id6\">\n<h3>\u7a0b\u5f0f\u7684\u4ecb\u9762</h3>\n<p>\u96d6\u7136jsoup\u53ef\u4ee5\u76f4\u63a5\u63a5\u6536\u7db2\u5740\u53bb\u53d6\u5f97\u7db2\u9801\u5167\u5bb9\uff0c\u4f46\u6e2c\u8a66\u7a0b\u5f0f\u6709\u8b80\u53d6\u6a94\u6848\u7684\u9700\u6c42\u6240\u4ee5\u9019\u908a\u6703\u63d0\u4f9b\u5169\u7a2e\u4ecb\u9762\u3002\n\u4e00\u7a2e\u5141\u8a31\u4f7f\u7528\u8005\u76f4\u63a5\u50b3\u5165string\u578b\u614b\u7684\u53c3\u6578\uff0c\u4e5f\u5c31\u662f\u7db2\u5740\u3002\u53e6\u5916\u4e00\u7a2e\u5247\u662f\u8b93\u4f7f\u7528\u8005\u50b3\u5165file\u578b\u614b\u7684\u53c3\u6578\u3002\n\u800c\u56de\u50b3\u503c\u7684\u5f62\u614b\u5247\u662f\u5b58\u653edata object\u7684list\uff0c\u9019\u908adata object\u7684\u540d\u7a31\u5c31\u5148\u5b9a\u7fa9\u70baenvypost\u597d\u4e86\u3002</p>\n<pre class=\"code scala literal-block\">\n<span class=\"k\">class</span> <span class=\"nc\">envypost</span><span class=\"o\">{</span>\n    <span class=\"k\">val</span> <span class=\"n\">uid</span><span class=\"k\">:</span><span class=\"kt\">integer</span>\n    <span class=\"k\">val</span> <span class=\"n\">title</span><span class=\"k\">:</span><span class=\"kt\">string</span>\n    <span class=\"k\">val</span> <span class=\"n\">lastposttime</span><span class=\"k\">:</span><span class=\"kt\">date</span>\n<span class=\"o\">}</span>\n\n<span class=\"k\">def</span> <span class=\"n\">parse</span><span class=\"o\">(</span><span class=\"n\">url</span><span class=\"k\">:</span><span class=\"kt\">string</span><span class=\"o\">)</span><span class=\"k\">:</span><span class=\"kt\">list</span><span class=\"o\">[</span><span class=\"kt\">envypost</span><span class=\"o\">]={}</span>\n<span class=\"k\">def</span> <span class=\"n\">parse</span><span class=\"o\">(</span><span class=\"n\">file</span><span class=\"k\">:</span><span class=\"kt\">file</span><span class=\"o\">)</span><span class=\"k\">:</span><span class=\"kt\">list</span><span class=\"o\">[</span><span class=\"kt\">envypost</span><span class=\"o\">]={}</span>\n</pre>\n</div>\n<div class=\"section\" id=\"id7\">\n<h3>\u958b\u59cb\u7528jsoup\u5206\u6790\u7db2\u9801\u8cc7\u8a0a\u5427</h3>\n</div>\n</div>\n<div class=\"section\" id=\"id8\">\n<h2>\u627e\u51fa\u6240\u6709\u6587\u7ae0</h2>\n<p>\u96d6\u7136jsoup\u6709\u63d0\u4f9b\u5f88\u591a\u7a2e\u5206\u6790\u7684\u65b9\u5f0f\uff0c\u4f46\u662f\u6211\u6700\u559c\u6b61\u7528\u7684\u9084\u662f <a class=\"reference external\" href=\"http://jsoup.org/cookbook/extracting-data/selector-syntax\">selector</a> \u7684\u8a9e\u6cd5\u3002\u56e0\u70ba\u7c21\u55ae\u660e\u77ad\u53c8\u597d\u95b1\u8b80\uff01\uff01\n\u57f7\u884c\u6548\u7387\u6211\u5247\u5b8c\u5168\u4e0d\u5728\u610f\uff0c\u53cd\u6b63\u6211\u7684\u9700\u6c42\u4e5f\u4e0d\u662f\u4e00\u79d2\u5e7e\u5341\u842c\u4e0a\u4e0b\u7684\u6771\u897f\u3002\u80fd\u5920\u8b93\u6211\u6109\u5feb\u53c8\u5feb\u901f\u7684\u5beb\u597d\u624d\u662f\u91cd\u8981\u7684\u3002</p>\n<pre class=\"code scala literal-block\">\n<span class=\"k\">object</span> <span class=\"nc\">envyexample</span> <span class=\"o\">{</span>\n  <span class=\"k\">def</span> <span class=\"n\">parse</span><span class=\"o\">(</span><span class=\"n\">file</span><span class=\"k\">:</span><span class=\"kt\">file</span><span class=\"o\">,</span><span class=\"n\">encode</span><span class=\"k\">:</span><span class=\"kt\">string</span><span class=\"o\">=</span><span class=\"s\">\"big5\"</span><span class=\"o\">)</span><span class=\"k\">:</span><span class=\"kt\">list</span><span class=\"o\">[</span><span class=\"kt\">envypost</span><span class=\"o\">]={</span>\n    <span class=\"k\">val</span> <span class=\"n\">doc</span> <span class=\"k\">=</span> <span class=\"n\">jsoup</span><span class=\"o\">.</span><span class=\"n\">parse</span><span class=\"o\">(</span><span class=\"n\">file</span><span class=\"o\">,</span><span class=\"n\">encode</span><span class=\"o\">,</span><span class=\"n\">envyurl</span><span class=\"o\">)</span>\n    <span class=\"k\">val</span> <span class=\"n\">posts</span> <span class=\"k\">=</span> <span class=\"n\">parsepage</span><span class=\"o\">(</span><span class=\"n\">doc</span><span class=\"o\">)</span>\n  <span class=\"o\">}</span>\n  <span class=\"k\">def</span> <span class=\"n\">parsepage</span><span class=\"o\">(</span><span class=\"n\">page</span><span class=\"k\">:</span><span class=\"kt\">document</span><span class=\"o\">)={</span>\n    <span class=\"n\">doc</span><span class=\"o\">.</span><span class=\"n\">select</span><span class=\"o\">(</span><span class=\"s\">\"tbody[id^=normalthread]\"</span><span class=\"o\">)</span>\n  <span class=\"o\">}</span>\n<span class=\"o\">}</span>\n</pre>\n<p>\u7531\u65bc\u8a72\u8ad6\u58c7\u7684\u6bcf\u4e00\u7bc7\u6587\u7ae0\u90fd\u88ab\u4e00\u500btbody\u7684tag\u5305\u570d\uff0c\u4e14\u6b64tbody\u7684id\u958b\u982d\u70banormalthread\u3002\u56e0\u6b64\u6211\u7684\u7b2c\u4e00\u6b65\u5c31\u662f\u5148\u627e\u51fa\u6b64\u9801\u4e2d\u6bcf\u4e00\u7bc7\u6587\u7ae0\u7684element\u3002</p>\n<p>\u96d6\u7136\u8aaajsoup\u8ddfjquery\u4e00\u6a23\u5c0d\u65bctag\u7684id\u8207class\u5c6c\u6027\u90fd\u6709\u7279\u6b8a\u7684\u8a9e\u6cd5\u4f8b\u5982 tag#id \u6216 tag.class \u4f46\u662f\u7531\u65bc\u6211\u9700\u8981\u4f7f\u7528\u6b63\u898f\u8868\u793a\u662f\u4f86\u627e\u51faid\u70banormalthread\u958b\u982d\u7684tbody\u3002\n\u6240\u4ee5\u9019\u908a\u4f7f\u7528</p>\n<blockquote>\ntbody[id^=normalthread]</blockquote>\n<p>\u56e0\u70ba\u82e5\u4f7f\u7528 # \u7684\u8a9e\u6cd5\u5c31\u6c92\u6709\u8fa6\u6cd5\u4f7f\u7528\u6b63\u898f\u8868\u793a\u5f0f\uff08\u81f3\u5c11\u6211\u76ee\u524d\u5728\u5b98\u7db2\u7684\u8aaa\u660e\u6587\u4ef6\u9084\u6c92\u6709\u627e\u5230 orz\uff09\n\u6709\u6c92\u6709\u89ba\u5f97\u9019\u500b\u8a9e\u6cd5\u771f\u7684\u8d85\u7d1a\u65b9\u4fbf\u7684\uff0c\u5982\u679c\u662f\u7528\u5176\u4ed6\u5de5\u5177\u7684\u8a71\uff0c\u6211\u73fe\u5728\u61c9\u8a72\u9084\u5728\u8655\u7406\u628aid\u5c6c\u6027\u53d6\u51fa\u4f86\uff0c\u7136\u5f8c\u7528string\u7684startwith\u4f86\u5224\u65b7\u662f\u4e0d\u662fnormalthread\u958b\u982d\u3002</p>\n<p>\u53e6\u5916\uff0c\u6211\u559c\u6b61\u628a\u6bcf\u4e00\u500b\u6b65\u9a5f\u5206\u89e3\u6210\u5f88\u591a\u5c0f\u51fd\u5f0f\uff0c\u56e0\u70ba\u9019\u6a23\u65b9\u4fbf\u6211\u9032\u884c\u6e2c\u8a66\u3002\u4f8b\u5982\u4e0a\u9762\u9019\u4e00\u6bb5\u7a0b\u5f0f\u78bc\uff0c\u6211\u76f8\u5c0d\u61c9\u7684\u6e2c\u8a66\u7a0b\u5f0f\u78bc\u6703\u9577\u9019\u6a23\u3002</p>\n<pre class=\"code scala literal-block\">\n<span class=\"k\">class</span> <span class=\"nc\">testenvyexample</span> <span class=\"k\">extends</span> <span class=\"n\">funsuite</span> <span class=\"k\">with</span> <span class=\"n\">shouldmatchers</span><span class=\"o\">{</span>\n  <span class=\"n\">test</span><span class=\"o\">(</span><span class=\"s\">\"there should be 10 post in the test file\"</span><span class=\"o\">){</span>\n    <span class=\"k\">val</span> <span class=\"n\">doc</span> <span class=\"k\">=</span> <span class=\"n\">jsoup</span><span class=\"o\">.</span><span class=\"n\">parse</span><span class=\"o\">(</span><span class=\"k\">new</span> <span class=\"n\">file</span><span class=\"o\">(</span><span class=\"s\">\"./testdata/envy.html\"</span><span class=\"o\">),</span><span class=\"s\">\"big5\"</span><span class=\"o\">,</span><span class=\"n\">envyexample</span><span class=\"o\">.</span><span class=\"n\">envyurl</span><span class=\"o\">)</span>\n    <span class=\"k\">val</span> <span class=\"n\">posts</span> <span class=\"k\">=</span> <span class=\"n\">envyexample</span><span class=\"o\">.</span><span class=\"n\">parsepage</span><span class=\"o\">(</span><span class=\"n\">doc</span><span class=\"o\">)</span>\n    <span class=\"n\">posts</span><span class=\"o\">.</span><span class=\"n\">size</span> <span class=\"n\">should</span> <span class=\"n\">be</span> <span class=\"o\">(</span><span class=\"mi\">18</span><span class=\"o\">)</span>\n  <span class=\"o\">}</span>\n<span class=\"o\">}</span>\n</pre>\n<p>\u9806\u4fbf\u8aaa\u660e\u4e00\u4e0b\u8a9e\u6cd5\uff0c\u6211\u6240\u4f7f\u7528\u7684\u6e2c\u8a66framework\u662f <a class=\"reference external\" href=\"http://www.scalatest.org/\">scalatest</a> \uff0c\u9019\u908a\u4f7f\u7528java\u7684junit\u4e5f\u662f\u53ef\u4ee5\u3002\ntestenvyexample\u7e7c\u627ffunsuite\u8ddfshouldmatchers\u5169\u500bclass\uff0c\u9019\u5169\u500bclass\u4e3b\u8981\u8b93\u6e2c\u8a66\u7a0b\u5f0f\u53ef\u4ee5\u4f7f\u7528**test**\u8ddf**should be**\u5169\u7a2e\u8a9e\u6cd5\u3002</p>\n<p>\u5230\u9019\u908a\u7a0b\u5f0f\u57f7\u884c\u5b8c\u7562\u4e4b\u5f8c\u6211\u5c31\u6709\u76ee\u524d\u6b64\u9801\u9762\u6bcf\u4e00\u7bc7\u6587\u7ae0\u7684\u6240\u6709\u5167\u5bb9\u4e86\u3002\u4e0b\u4e00\u6b65\u5c31\u662f\u8981\u5206\u6790\u9019\u4e9b\u6587\u7ae0\u5167\u5bb9\u4e86\u3002</p>\n</div>\n<div class=\"section\" id=\"idtitleauthorlink\">\n<h2>\u5206\u6790\u6587\u7ae0\u7684\u5167\u5bb9-\u53d6\u5f97id\u3001title\u3001author\u8207link</h2>\n<p>\u53d6\u5f97post\u7684\u529f\u80fd\u518d\u53e6\u5916\u7368\u7acb\u4e00\u500bparsepost\u7684function\uff0c\u50b3\u5165\u7684\u53c3\u6578\u5247\u70ba\u5305\u542b\u6240\u6709\u6587\u7ae0\u5167\u5bb9\u7684element\uff0c\u4e26\u4e14\u5e0c\u671b\u9019\u500bfunction\u53ef\u4ee5\u56de\u50b3\u4e00\u500benvypost\u7269\u4ef6\u3002</p>\n<pre class=\"code scala literal-block\">\n<span class=\"k\">def</span> <span class=\"n\">parsepost</span><span class=\"o\">(</span><span class=\"n\">post</span><span class=\"k\">:</span><span class=\"kt\">element</span><span class=\"o\">)</span><span class=\"k\">:</span><span class=\"kt\">envypost</span><span class=\"o\">={</span>\n<span class=\"o\">}</span>\n</pre>\n<p>\u6587\u7ae0id\u7684\u53d6\u5f97\u662f\u900f\u904etbody\u672c\u8eab\u7684id\u5c6c\u6027\uff0c\u4ed6\u7684\u683c\u5f0f\u662fnormalthread_xxxxxx\uff0c\u5f8c\u9762\u7684xxxxxx\u5c31\u662f\u6b64\u7bc7\u6587\u7ae0\u7684id\uff0c</p>\n<pre class=\"code scala literal-block\">\n<span class=\"k\">def</span> <span class=\"n\">parsepost</span><span class=\"o\">(</span><span class=\"n\">post</span><span class=\"k\">:</span><span class=\"kt\">element</span><span class=\"o\">)={</span>\n    <span class=\"k\">val</span> <span class=\"n\">id</span> <span class=\"k\">=</span> <span class=\"n\">post</span><span class=\"o\">.</span><span class=\"n\">attr</span><span class=\"o\">(</span><span class=\"s\">\"id\"</span><span class=\"o\">).</span><span class=\"n\">replace</span><span class=\"o\">(</span><span class=\"s\">\"normalthread_\"</span><span class=\"o\">,</span><span class=\"s\">\"\"</span><span class=\"o\">)</span>\n    <span class=\"k\">val</span> <span class=\"o\">(</span><span class=\"n\">title</span><span class=\"o\">,</span><span class=\"n\">link</span><span class=\"o\">)</span> <span class=\"k\">=</span> <span class=\"n\">parserpost_titleandlink</span><span class=\"o\">(</span><span class=\"n\">id</span><span class=\"o\">,</span><span class=\"n\">post</span><span class=\"o\">)</span>\n    <span class=\"k\">val</span> <span class=\"n\">author</span> <span class=\"k\">=</span> <span class=\"n\">parserpost_author</span><span class=\"o\">(</span><span class=\"n\">post</span><span class=\"o\">)</span>\n\n    <span class=\"k\">new</span> <span class=\"n\">envypost</span><span class=\"o\">(</span><span class=\"n\">id</span><span class=\"o\">,</span><span class=\"n\">title</span><span class=\"o\">,</span><span class=\"n\">author</span><span class=\"o\">,</span><span class=\"n\">link</span><span class=\"o\">)</span>\n<span class=\"o\">}</span>\n</pre>\n<p>link\u8ddftitle\u5176\u5be6\u662f\u4e00\u8d77\u53d6\u5f97\u7684\uff0c\u5b83\u5011\u53ef\u4ee5\u5f9eid\u70bathread_xxxxxx\u7684span tag\u4e2d\u53d6\u5f97\u3002</p>\n<pre class=\"code scala literal-block\">\n<span class=\"k\">def</span> <span class=\"n\">parserpost_titleandlink</span><span class=\"o\">(</span><span class=\"n\">id</span><span class=\"k\">:</span><span class=\"kt\">string</span><span class=\"o\">,</span><span class=\"n\">post</span><span class=\"k\">:</span><span class=\"kt\">element</span><span class=\"o\">)={</span>\n    <span class=\"k\">val</span> <span class=\"n\">element</span> <span class=\"k\">=</span> <span class=\"n\">post</span><span class=\"o\">.</span><span class=\"n\">select</span><span class=\"o\">(</span><span class=\"s\">\"span#thread_\"</span><span class=\"o\">+</span><span class=\"n\">id</span><span class=\"o\">).</span><span class=\"n\">first</span>\n    <span class=\"o\">(</span><span class=\"n\">element</span><span class=\"o\">.</span><span class=\"n\">text</span><span class=\"o\">,</span><span class=\"n\">element</span><span class=\"o\">.</span><span class=\"n\">select</span><span class=\"o\">(</span><span class=\"s\">\"a\"</span><span class=\"o\">).</span><span class=\"n\">first</span><span class=\"o\">.</span><span class=\"n\">attr</span><span class=\"o\">(</span><span class=\"s\">\"href\"</span><span class=\"o\">))</span>\n<span class=\"o\">}</span>\n</pre>\n<p>author\u7684\u540d\u5b57\u5247\u5728class\u70baauthor\u7684td tag\u5167cite\u4e2d\u56e0\u6b64\u53d6\u7684\u6642\u5019\u4f7f\u7528</p>\n<blockquote>\ntag1 tag2</blockquote>\n<p>\u7684\u8a9e\u6cd5\uff0c\u9019\u4ee3\u8868\u641c\u5c0btag1\u5e95\u4e0b\u6240\u6709\u7684tag2</p>\n<pre class=\"code scala literal-block\">\n<span class=\"k\">def</span> <span class=\"n\">parserpost_author</span><span class=\"o\">(</span><span class=\"n\">post</span><span class=\"k\">:</span><span class=\"kt\">element</span><span class=\"o\">)={</span>\n    <span class=\"n\">post</span><span class=\"o\">.</span><span class=\"n\">select</span><span class=\"o\">(</span><span class=\"s\">\"td.author cite\"</span><span class=\"o\">).</span><span class=\"n\">first</span><span class=\"o\">.</span><span class=\"n\">text</span>\n<span class=\"o\">}</span>\n</pre>\n<p>\u6253\u5b8c\u6536\u5de5\uff0c\u9019\u6a23\u7684\u77ed\u77ed\u7684\u7a0b\u5f0f\u78bc\u5c31\u628a\u4e00\u500b\u7db2\u7ad9\u90fd\u5206\u6790\u5b8c\u4e86\uff0c\u771f\u7684\u592a\u68d2\u4e86 qq\n\u4ee5\u524d\u8981\u5206\u6790\u4e00\u500b\u7db2\u7ad9\u8d85\u8840\u6dda\u7684\uff0c\u771f\u7684\u611f\u8b1dopen source\u7684\u773e\u591a\u597d\u5fc3\u4eba\uff0c\u9858\u610f\u5206\u4eab\u4ed6\u5011\u7684\u6210\u679c\u8207\u7a0b\u5f0f\u78bc\u3002\n\u7576\u7136\u5f8c\u7e8c\u9084\u6709\u63db\u9801\u8b80\u53d6\u6216\u8005\u662f\u6bd4\u5c0d\u4e4b\u524d\u7684\u5167\u5bb9\u770b\u662f\u5426\u6709\u66f4\u65b0\u4e4b\u985e\u7684\u5de5\u4f5c\uff0c\u4f46\u662f\u9019\u90fd\u662f\u5f8c\u8a71\u4e86\u3002</p>\n<p>p.s\u4e00\u7bc7\u6587\u7ae0\u6211\u7adf\u7136\u8981\u6253\u5feb\u5169\u500b\u6708\uff0c\u771f\u4f69\u670d\u90a3\u4e9b\u6709\u8fa6\u6cd5\u6bcf\u5929\u90fd\u6709\u7522\u51fa\u7684\u4eba</p>\n</div></body></html>", "ARCHIVE_FILENAME": "archive.html", "THEME_REVEAL_CONGIF_SUBTHEME": "sky", "message_Read more": "Read more", "SITE_URL": "http://swind.code-life.info", "LISTINGS_FOLDER": "listings", "INDEXES_PAGES": "", "next": "/posts/scala-log-tool.json", "message_Next post": "Next post", "BLOG_DESCRIPTION": "I am Swind.", "EXTRA_HEAD_DATA": "", "DEFAULT_LANG": "en", "disqus_html": "<div id=\"disqus_thread\"></div> <script type=\"text/javascript\">var disqus_shortname=\"swindgithub\";var disqus_url=\"http://swind.code-life.info/posts/jsoup.html\";(function(){var a=document.createElement(\"script\");a.type=\"text/javascript\";a.async=true;a.src=\"http://\"+disqus_shortname+\".disqus.com/embed.js\";(document.getElementsByTagName(\"head\")[0]||document.getElementsByTagName(\"body\")[0]).appendChild(a)})();        </script><noscript>Please enable JavaScript to view the <a href=\"http://disqus.com/?ref_noscript\">comments powered by DISQUS.</a></noscript><a href=\"http://disqus.com\"class=\"dsq-brlink\">comments powered by <span class=\"logo-disqus\">DISQUS</span></a>", "RSS_PATH": "", "title": "\u597d\u7528\u7684 HTML Parser - jsoup", "SEARCH_FORM": "", "message_Tags": "Tags", "INDEX_PATH": "", "BLOG_AUTHOR": "Swind", "message_Older posts": "Older posts", "OUTPUT_FOLDER": "output", "message_Original site": "Original site", "ANALYTICS": "UA-15910682-2", "BLOG_EMAIL": "", "message_Posts for year %s": "Posts for year %s", "message_old posts page %d": "old posts page %d", "BLOG_TITLE": "Corleonis", "message_Posted": "Posted", "GALLERY_PATH": "galleries", "CODE_COLOR_SCHEME": "default", "message_Read in English": "Read in English", "CACHE_FOLDER": "cache", "tags": [{"link": "/categories/scala.html", "name": "Scala"}], "tags?": true, "__file__": "conf.pyc", "translations": [], "CONTENT_FOOTER": "Contents &copy; 2013 <a href=\"mailto:\">Swind</a> - Powered by <a href=\"http://nikola.ralsina.com.ar\">Nikola</a>", "BASE_URL": "http://swind.code-life.info", "THEME": "mySite", "message_Also available in": "Also available in", "BLOG_URL": "http://swind.code-life.info", "date": "2011-10-27 08:47", "__name__": "conf", "message_Posts about %s": "Posts about %s", "message_Posts for {month} {year}": "Posts for {month} {year}", "message_More posts about": "More posts about", "ARCHIVE_PATH": "", "DATE_FORMAT": "%Y-%m-%d %H:%M", "TAG_PATH": "categories", "prev": "/posts/octopress-note.json", "message_Newer posts": "Newer posts", "message_LANGUAGE": "English", "MATHJAX_CONFIG": "", "message_Archive": "Archive", "message_Source": "Source", "DISQUS_FORUM": "swindgithub", "INDEXES_TITLE": ""}