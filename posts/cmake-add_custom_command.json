{"THEME_REVEAL_CONGIF_TRANSITION": "cube", "message_Previous post": "Previous post", "LICENSE": "\n<a rel=\"license\" href=\"http://creativecommons.org/licenses/by-nc-sa/2.5/ar/\">\n<img alt=\"Creative Commons License BY-NC-SA\"\nstyle=\"border-width:0; margin-bottom:12px;\"\nsrc=\"http://i.creativecommons.org/l/by-nc-sa/2.5/ar/88x31.png\"></a>", "text": "<html><body><p>\u6700\u8fd1\u56e0\u70ba\u5fc5\u9808\u8981\u793a\u7bc4\u5982\u4f55\u5c07\u516c\u53f8\u7684 autoconf \u8207 automake \u8f49\u6210 CMake\uff0c\u6240\u4ee5\u7a0d\u5fae\u7814\u7a76\u4e86\u4e00\u4e0b\u4e4b\u524d\u5b8c\u5168\u6c92\u6709\u7528\u904e\u5f97 <a class=\"reference external\" href=\"http://www.cmake.org/cmake/help/cmake2.6docs.html#command:add_custom_command\">add_custom_command</a> \u8ddf <a class=\"reference external\" href=\"http://www.cmake.org/cmake/help/cmake2.6docs.html#command:add_custom_target\">add_custom_target</a></p>\n<div class=\"section\" id=\"symbolic-link\">\n<h2>\u5efa\u7acb symbolic link</h2>\n<p>\u76ee\u524d\u6709\u4e00\u500b\u9700\u6c42\u662f\u8981\u5efa\u7acb symbolic link \u5728\u67d0\u4e9b\u7279\u5b9a\u7684\u8cc7\u6599\u593e\u88e1\u9762\u3002\n\u7531\u65bc autotools \u662f\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528 script \u7684\u8a9e\u6cd5\uff0c\u6240\u4ee5\u5efa\u7acb\u8d77\u4f86\u975e\u5e38\u7c21\u55ae\u3002</p>\n<pre class=\"code bash literal-block\">\ninstall-exec-hook:\n     ln -fs <span class=\"k\">$(</span>source_prefix<span class=\"k\">)</span>/a <span class=\"k\">$(</span>target_prefix<span class=\"k\">)</span>/path1\n     ln -fs <span class=\"k\">$(</span>source_prefix<span class=\"k\">)</span>/a <span class=\"k\">$(</span>target_prefix<span class=\"k\">)</span>/path2\n     ln -fs <span class=\"k\">$(</span>source_prefix<span class=\"k\">)</span>/a <span class=\"k\">$(</span>target_prefix<span class=\"k\">)</span>/path3\n     ln -fs <span class=\"k\">$(</span>source_prefix<span class=\"k\">)</span>/a <span class=\"k\">$(</span>target_prefix<span class=\"k\">)</span>/path4\n     ln -fs <span class=\"k\">$(</span>source_prefix<span class=\"k\">)</span>/a <span class=\"k\">$(</span>target_prefix<span class=\"k\">)</span>/path5\n</pre>\n<p>\u9019\u6a23\u53ea\u8981\u76f4\u63a5\u547c\u53eb make install-exec-hook \u5c31\u53ef\u4ee5\u5efa\u7acb symbolic link \u4e86\u3002\n\u4f46\u662f\u5982\u679c\u8981\u5728 CMake \u88e1\u9762\u4f5c\u5230\u4e00\u6a23\u7684\u4e8b\u60c5\u8981\u600e\u9ebc\u8655\u7406\u5462\uff1f</p>\n<pre class=\"code cmake literal-block\">\n<span class=\"nb\">Set</span><span class=\"p\">(</span><span class=\"s\">targets</span>\n    <span class=\"o\">${</span><span class=\"nv\">target_prefix</span><span class=\"o\">}</span><span class=\"s\">/path1</span>\n    <span class=\"o\">${</span><span class=\"nv\">target_prefix</span><span class=\"o\">}</span><span class=\"s\">/path2</span>\n    <span class=\"o\">${</span><span class=\"nv\">target_prefix</span><span class=\"o\">}</span><span class=\"s\">/path3</span>\n    <span class=\"o\">${</span><span class=\"nv\">target_prefix</span><span class=\"o\">}</span><span class=\"s\">/path4</span>\n    <span class=\"o\">${</span><span class=\"nv\">target_prefix</span><span class=\"o\">}</span><span class=\"s\">/path5</span>\n<span class=\"p\">)</span>\n\n<span class=\"nb\">Function</span><span class=\"p\">(</span><span class=\"s\">Create_symbolic_link</span> <span class=\"s\">source</span> <span class=\"s\">target</span><span class=\"p\">)</span>\n    <span class=\"nb\">Add_custom_command</span><span class=\"p\">(</span>\n        <span class=\"s\">OUTPUT</span> <span class=\"o\">${</span><span class=\"nv\">target</span><span class=\"o\">}</span>\n        <span class=\"s\">COMMAND</span> <span class=\"s\">ln</span> <span class=\"s\">-fs</span> <span class=\"o\">${</span><span class=\"nv\">source</span><span class=\"o\">}</span> <span class=\"o\">${</span><span class=\"nv\">target</span><span class=\"o\">}</span>\n    <span class=\"p\">)</span>\n<span class=\"nb\">Endfunction</span><span class=\"p\">()</span>\n\n<span class=\"nb\">Foreach</span><span class=\"p\">(</span><span class=\"s\">target</span> <span class=\"s\">targets</span><span class=\"p\">)</span>\n   <span class=\"nb\">Create_symbolic_link</span><span class=\"p\">(</span><span class=\"o\">${</span><span class=\"nv\">source_prefix</span><span class=\"o\">}</span><span class=\"s\">/a</span> <span class=\"o\">${</span><span class=\"nv\">target</span><span class=\"o\">}</span><span class=\"p\">)</span>\n<span class=\"nb\">Endforeach</span><span class=\"p\">()</span>\n\n<span class=\"nb\">Add_custom_target</span><span class=\"p\">(</span><span class=\"s\">install-exec-hook</span> <span class=\"s\">DEPENDS</span> <span class=\"o\">${</span><span class=\"nv\">targets</span><span class=\"o\">}</span><span class=\"p\">)</span>\n</pre>\n<p>\u56e0\u70ba CMake \u88e1\u9762\u6c92\u6709\u8fa6\u6cd5\u50cf shell script \u4e00\u6a23\u76f4\u63a5\u4e0b\u6307\u4ee4\uff0c\u5fc5\u9808\u900f\u904e Add_custom_command \u6216\u8005\u662f Execute_process \u7b49\u65b9\u5f0f\u57f7\u884c\u3002\n\u4f46\u662f\u82e5\u53c8\u8981\u8ddf Target \u5efa\u7acb\u76f8\u4f9d\u6027\u7684\u8a71\uff0c\u4f3c\u4e4e\u5c31\u4e00\u5b9a\u5f97\u9760 Add_custom_command\uff0c\u56e0\u70ba\u4ed6\u6703\u8a2d\u5b9a\u4e00\u500b output file\u3002\n\u9019\u6a23\u5c31\u53ef\u4ee5\u8b93 Target \u4f9d\u8cf4\u9019\u500b\u6a94\u6848 ( \u4ee5\u6211\u5011\u7684\u4f8b\u5b50\u4f86\u8aaa Target \u5c31\u662f install-exec-hook ) \u4f86\u9054\u5230 make Target \u5c31\u53ef\u4ee5\u5efa\u7acb symbolic link \u7684\u76ee\u7684\u3002</p>\n<p>\u9583\u6b7b\u4eba\u4e0d\u511f\u547d\u7684\u7d44\u5408 ...</p>\n<div class=\"figure\">\n<img alt=\"https://dl.dropboxusercontent.com/u/15537823/Blog/banner-of-the-stars_2.jpg\" src=\"https://dl.dropboxusercontent.com/u/15537823/Blog/banner-of-the-stars_2.jpg\">\n</div>\n<blockquote>\n<p>\u661f\u305f\u3061\u3088</p>\n<p>\u6c5d\u306e\u547d\u77ed\u304d\u7737\u65cf\u306e\u671b\u307f\u3092\u805e\u304f\u304c\u3088\u3044\u3002</p>\n<p>\u6211\u3089\u306e\u671b\u307f\u30fd</p>\n<p>\u305d\u308c\u306f</p>\n<p>\u6c5d\u306e\u672c\u964d\u3061\u3086\u304f\u3092\u770b\u53d6\u308b\u3053\u3068</p>\n</blockquote></div></body></html>", "ARCHIVE_FILENAME": "archive.html", "THEME_REVEAL_CONGIF_SUBTHEME": "sky", "message_Read more": "Read more", "SITE_URL": "http://swind.code-life.info", "LISTINGS_FOLDER": "listings", "INDEXES_PAGES": "", "next": false, "message_Next post": "Next post", "BLOG_DESCRIPTION": "I am Swind.", "EXTRA_HEAD_DATA": "", "DEFAULT_LANG": "en", "disqus_html": "<div id=\"disqus_thread\"></div> <script type=\"text/javascript\">var disqus_shortname=\"swindgithub\";var disqus_url=\"http://swind.code-life.info/posts/cmake-add_custom_command.html\";(function(){var a=document.createElement(\"script\");a.type=\"text/javascript\";a.async=true;a.src=\"http://\"+disqus_shortname+\".disqus.com/embed.js\";(document.getElementsByTagName(\"head\")[0]||document.getElementsByTagName(\"body\")[0]).appendChild(a)})();        </script><noscript>Please enable JavaScript to view the <a href=\"http://disqus.com/?ref_noscript\">comments powered by DISQUS.</a></noscript><a href=\"http://disqus.com\"class=\"dsq-brlink\">comments powered by <span class=\"logo-disqus\">DISQUS</span></a>", "RSS_PATH": "", "title": "CMake - add_custom_command", "SEARCH_FORM": "", "message_Tags": "Tags", "INDEX_PATH": "", "BLOG_AUTHOR": "Swind", "message_Older posts": "Older posts", "OUTPUT_FOLDER": "output", "message_Original site": "Original site", "ANALYTICS": "", "BLOG_EMAIL": "", "message_Posts for year %s": "Posts for year %s", "message_old posts page %d": "old posts page %d", "BLOG_TITLE": "Corleonis", "message_Posted": "Posted", "GALLERY_PATH": "galleries", "CODE_COLOR_SCHEME": "default", "message_Read in English": "Read in English", "CACHE_FOLDER": "cache", "tags": [{"link": "/categories/cmake.html", "name": "CMake"}, {"link": "/categories/cc.html", "name": "C/C++"}], "tags?": true, "__file__": "conf.pyc", "translations": [], "CONTENT_FOOTER": "Contents &copy; 2013 <a href=\"mailto:\">Swind</a> - Powered by <a href=\"http://nikola.ralsina.com.ar\">Nikola</a>", "BASE_URL": "http://swind.code-life.info", "THEME": "mySite", "message_Also available in": "Also available in", "BLOG_URL": "http://swind.code-life.info", "date": "2013-06-25 19:20", "__name__": "conf", "message_Posts about %s": "Posts about %s", "message_Posts for {month} {year}": "Posts for {month} {year}", "message_More posts about": "More posts about", "ARCHIVE_PATH": "", "DATE_FORMAT": "%Y-%m-%d %H:%M", "TAG_PATH": "categories", "prev": "/posts/c-thread-pool.json", "message_Newer posts": "Newer posts", "message_LANGUAGE": "English", "MATHJAX_CONFIG": "", "message_Archive": "Archive", "message_Source": "Source", "DISQUS_FORUM": "swindgithub", "INDEXES_TITLE": ""}