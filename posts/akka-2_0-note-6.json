{"THEME_REVEAL_CONGIF_TRANSITION": "cube", "message_Previous post": "Previous post", "LICENSE": "\n<a rel=\"license\" href=\"http://creativecommons.org/licenses/by-nc-sa/2.5/ar/\">\n<img alt=\"Creative Commons License BY-NC-SA\"\nstyle=\"border-width:0; margin-bottom:12px;\"\nsrc=\"http://i.creativecommons.org/l/by-nc-sa/2.5/ar/88x31.png\"></a>", "text": "<html><body><p>\u4eca\u5929\u65e9\u4e0a\u5148\u7c21\u55ae\u4e86\u4f9d\u7167\u6628\u5929\u756b\u5f97\u67b6\u69cb\u5716\u505a\u4e86\u4e00\u500b\u96db\u578b\uff0c\u6574\u500b\u8dd1\u8d77\u4f86\u529f\u80fd\u662f\u4ee5\u4e86\uff0c\u4f46\u662f\u6d41\u7a0b\u6574\u500b\u60b2\u5287 Orz ...\n\u5148\u662f Exception Handling \u505a\u7684\u4e0d\u5920\u597d\uff0c\u7d50\u679c\u5c31\u771f\u7684\u662f \"Let it Crash\" \u4e00\u76f4\u6b7b\u4e00\u76f4\u6b7b\u4e00\u76f4\u6b7b\uff0c\u597d\u50cf\u5728\u73a9 D3 \u7684\u7149\u7344\u6a21\u5f0f\u4e00\u6a23\u3002</p>\n<p>\u518d\u4f86\u662f\u6211\u6c92\u6709\u53bb\u8a2d\u5b9a Dispatcher \u6240\u4ee5 Thread \u7528\u4e86\u5341\u5e7e\u500b\u3002\u5982\u679c\u6211\u6c92\u6709\u770b\u932f\u7684\u8a71\uff0c\u4f9d\u7167 Akka <a class=\"reference external\" href=\"https://github.com/akka/akka/blob/master/akka-actor/src/main/resources/reference.conf\">reference.conf</a> \u7684\u8a2d\u5b9a\uff0c\nDefault Dispatcher \u4f7f\u7528 fork-join-executor\uff0c\u4ed6\u7684\u9810\u8a2d\u8a2d\u5b9a\u5982\u4e0b</p>\n<pre class=\"code scala literal-block\">\n<span class=\"n\">fork</span><span class=\"o\">-</span><span class=\"n\">join</span><span class=\"o\">-</span><span class=\"n\">executor</span> <span class=\"o\">{</span>\n  <span class=\"k\">#</span> <span class=\"nc\">Min</span> <span class=\"n\">number</span> <span class=\"n\">of</span> <span class=\"n\">threads</span> <span class=\"n\">to</span> <span class=\"n\">cap</span> <span class=\"n\">factor</span><span class=\"o\">-</span><span class=\"n\">based</span> <span class=\"n\">parallelism</span> <span class=\"n\">number</span> <span class=\"n\">to</span>\n  <span class=\"n\">parallelism</span><span class=\"o\">-</span><span class=\"n\">min</span> <span class=\"k\">=</span> <span class=\"mi\">8</span>\n\n  <span class=\"k\">#</span> <span class=\"nc\">Parallelism</span> <span class=\"o\">(</span><span class=\"n\">threads</span><span class=\"o\">)</span> <span class=\"o\">...</span> <span class=\"n\">ceil</span><span class=\"o\">(</span><span class=\"n\">available</span> <span class=\"n\">processors</span> <span class=\"o\">*</span> <span class=\"n\">factor</span><span class=\"o\">)</span>\n  <span class=\"n\">parallelism</span><span class=\"o\">-</span><span class=\"n\">factor</span> <span class=\"k\">=</span> <span class=\"mf\">3.0</span>\n\n  <span class=\"k\">#</span> <span class=\"nc\">Max</span> <span class=\"n\">number</span> <span class=\"n\">of</span> <span class=\"n\">threads</span> <span class=\"n\">to</span> <span class=\"n\">cap</span> <span class=\"n\">factor</span><span class=\"o\">-</span><span class=\"n\">based</span> <span class=\"n\">parallelism</span> <span class=\"n\">number</span> <span class=\"n\">to</span>\n  <span class=\"n\">parallelism</span><span class=\"o\">-</span><span class=\"n\">max</span> <span class=\"k\">=</span> <span class=\"mi\">64</span>\n<span class=\"o\">}</span>\n</pre>\n<p>\u5f88\u7c21\u55ae\u7684 parallelism-min \u8207 parallelism-max \u7684\u503c\u4ee3\u8868\u8457 Thread \u7684\u4e0a\u4e0b\u9650\uff0c\u90a3\u9ebc parallelism_factor \u5462\uff1f</p>\n<p>\u4ed6\u540c\u6a23\u4e5f\u662f\u9650\u5236 Thread \u7684\u4e0a\u9650\uff0c\u4e0a\u9650\u7684\u8a08\u7b97\u65b9\u5f0f\u70ba</p>\n<blockquote>\nparallelism-factor * \u4f60\u7684\u8655\u7406\u5668\u6838\u5fc3\u6578</blockquote>\n<p>\u6240\u4ee5\u6211\u7684\u56db\u6838\u5fc3\u684c\u6a5f\u4f7f\u7528\u9019\u500b Dispatcher \u6700\u591a\u6703\u958b\u5230 12 \u500b Thread Orz ...</p>\n<!-- TEASER_END -->\n<p>\u96e3\u602a\u6211\u7684 Thread \u6703\u6eff\u5929\u98db\u4e86</p>\n<p>\u9019\u908a\u6211\u8981\u5148\u641e\u5b9a\u6211\u4e4b\u524d\u4e00\u76f4\u9003\u907f\u7684 Akka \u8a2d\u5b9a\u6a94\uff0c\u4e4b\u524d\u6703\u9003\u907f\u662f\u56e0\u70ba\u6211\u7528 Eclipse \u7684 ScalaIDE \u52a0\u4e0a sbt \u4f86\u958b\u767c\u3002\n\u4e0d\u77e5\u9053\u70ba\u4ec0\u9ebc\u4e4b\u524d\u8a2d\u5b9a\u6a94\u5728 build \u7684\u6642\u5019\u4e00\u76f4\u4e0d\u6703\u81ea\u52d5\u653e\u5230\u7de8\u8b6f\u5b8c\u6210\u7684\u76ee\u9304\u4e0b\u9762\uff0c\u6240\u4ee5\u5c31\u6574\u500b\u6012\u5b8c\u5168\u4e0d\u60f3\u641e\u8a2d\u5b9a\u6a94\u9019\u7a2e\u6771\u897f\u3002\n\u90a3\u6642\u5019\u662f\u5077\u61f6\u76f4\u63a5\u5beb\u5728\u7a0b\u5f0f\u78bc\u88e1\u9762\u3002</p>\n<pre class=\"code scala literal-block\">\n<span class=\"k\">val</span> <span class=\"n\">config</span> <span class=\"k\">=</span> <span class=\"s\">\"\"\"\n   my-dispatcher {\n     # Dispatcher is the name of the event-based dispatcher\n     type = Dispatcher\n     # What kind of ExecutionService to use\n     executor = \"fork-join-executor\"\n     # Configuration for the fork join pool\n     fork-join-executor {\n       # Min number of threads to cap factor-based parallelism number to\n       parallelism-min = 2\n       # Parallelism (threads) ... ceil(available processors * factor)\n       parallelism-factor = 2.0\n       # Max number of threads to cap factor-based parallelism number to\n       parallelism-max = 10\n     }\n     # Throughput defines the maximum number of messages to be\n     # processed per actor before the thread jumps to the next actor.\n     # Set to 1 for as fair as possible.\n     throughput = 1\n   }\n   \"\"\"</span>\n<span class=\"k\">val</span> <span class=\"n\">system</span> <span class=\"k\">=</span> <span class=\"nc\">ActorSystem</span><span class=\"o\">(</span><span class=\"s\">\"MySystem\"</span><span class=\"o\">,</span><span class=\"nc\">ConfigFactory</span><span class=\"o\">.</span><span class=\"n\">load</span><span class=\"o\">(</span><span class=\"n\">customConf</span><span class=\"o\">))</span>\n</pre>\n<p>\u4e0a\u9762\u628a\u8a2d\u5b9a\u6a94\u5167\u5bb9\u76f4\u63a5\u5132\u5b58\u6210\u5b57\u4e32\uff0c\u7136\u5f8c\u7528 ConfigFactory.load \u5c31\u53ef\u4ee5\u7522\u751f\u8a2d\u5b9a\u6a94\u4e86\uff0c\u4e0d\u904e\u4e00\u76f4\u653e\u5728\u7a0b\u5f0f\u78bc\u88e1\u9762\u4e5f\u4e0d\u662f\u4e00\u4ef6\u5065\u5eb7\u7684\u4e8b\u60c5\u3002\n\u6240\u4ee5\u9084\u662f\u82b1\u4e86\u4e00\u9ede\u6642\u9593\u8655\u7406\u4e4b\u524d\u5728 Eclipse \u4e0a\u9762\u9047\u5230\u7684\u554f\u984c\u3002</p>\n<p>\u4e0d\u904e\u4fd7\u8a71\u8aaa\u5f97\u597d\uff0c\u8d8a\u96e3\u627e\u7684 Bug \u8d8a\u8822 ... \u6211\u53c8\u518d\u6b21\u9a57\u8b49\u4e86\u9019\u500b\u9053\u7406 Orz</p>\n<p>\u5982\u679c\u4f60\u662f\u4f7f\u7528 sbt \u4e0a\u9762\u7684 sbt-eclipse \u4f86\u5efa\u7acb Eclipse Project\uff0c\u7531\u65bc plugin \u4e0d\u8cbc\u5fc3\u6216\u8005\u5f88\u8cbc\u5fc3\u7684\u8a2d\u8a08\u3002\n\u4ed6\u5728 Eclipse \u88e1\u9762\u4e26\u4e0d\u6703\u5e6b\u4f60\u5efa\u7acb resources \u7684 source folder\uff0c\n\u6240\u4ee5\u8acb\u624b\u52d5\u5728 src/main \u4e0b\u9762\u5efa\u7acb\u4e00\u500b resources \u7684 source folder\u3002</p>\n<p>\u63a5\u8457\u662f\u7b28\u9ede Orz\uff0c\u8acb\u9032\u5165 Project \u7684\u8a2d\u5b9a\u756b\u9762\uff0c\u7136\u5f8c\u9078\u64c7 Java Build Path \u7684\u5167 Source \u7684 Tab\u3002\n\u8acb\u5c07 <strong>src/main/resources</strong> \u7684 <strong>Output folder</strong> \u7684\u8def\u5f91\u8a2d\u5b9a\u7684\u8ddf src/main/scala \u4e00\u6a23\u3002</p>\n<img alt=\"https://dl.dropbox.com/u/15537823/Blog/Akka%202.0%20%E7%AD%86%E8%A8%98%286%29%20-%20Dispatcher%20%E7%9A%84%E8%A8%AD%E5%AE%9A/Eclipse_Setting.png\" src=\"https://dl.dropbox.com/u/15537823/Blog/Akka%202.0%20%E7%AD%86%E8%A8%98%286%29%20-%20Dispatcher%20%E7%9A%84%E8%A8%AD%E5%AE%9A/Eclipse_Setting.png\">\n<p>\u4e4b\u524d\u90fd\u6c92\u6709\u90e8\u5c6c\u5230\u6211\u60f3\u8981\u5f97\u5730\u65b9\u5c31\u662f\u56e0\u70ba\u4ed6\u662f\u653e\u5230 default output folder \u4e5f\u5c31\u662f bin \u5e95\u4e0b Orz\u3002</p>\n<p>\u4e4b\u5f8c\u5c31\u53ef\u4ee5\u53c3\u8003 <a class=\"reference external\" href=\"http://doc.akka.io/docs/akka/2.0.1/general/configuration.html\">Configure</a> \u8207 <a class=\"reference external\" href=\"http://doc.akka.io/docs/akka/2.0.2/scala/dispatchers.html\">Dispatcher</a> \u7684\u5167\u5bb9\u53bb\u8a2d\u5b9a\u4e86\u3002</p>\n<p>\u9019\u6a23\u5c31\u89e3\u6c7a\u4e86\u6211\u4e4b\u524d\u4e00\u76f4\u61f6\u5f97\u627e\u5f97\u554f\u984c\uff0c\u518d\u4f86\u61c9\u8a72\u5c31\u6703\u8a73\u7d30\u8a2d\u5b9a\u4e00\u4e0b Scatter-Gather \u6240\u8981\u7528\u7684 Dispatcher \u4e86\u3002</p></body></html>", "ARCHIVE_FILENAME": "archive.html", "THEME_REVEAL_CONGIF_SUBTHEME": "sky", "message_Read more": "Read more", "SITE_URL": "http://swind.code-life.info", "LISTINGS_FOLDER": "listings", "INDEXES_PAGES": "", "next": "/posts/build-restful-api-server-by-spray.json", "message_Next post": "Next post", "BLOG_DESCRIPTION": "I am Swind.", "EXTRA_HEAD_DATA": "", "DEFAULT_LANG": "en", "disqus_html": "<div id=\"disqus_thread\"></div> <script type=\"text/javascript\">var disqus_shortname=\"swindgithub\";var disqus_url=\"http://swind.code-life.info/posts/akka-2_0-note-6.html\";(function(){var a=document.createElement(\"script\");a.type=\"text/javascript\";a.async=true;a.src=\"http://\"+disqus_shortname+\".disqus.com/embed.js\";(document.getElementsByTagName(\"head\")[0]||document.getElementsByTagName(\"body\")[0]).appendChild(a)})();        </script><noscript>Please enable JavaScript to view the <a href=\"http://disqus.com/?ref_noscript\">comments powered by DISQUS.</a></noscript><a href=\"http://disqus.com\"class=\"dsq-brlink\">comments powered by <span class=\"logo-disqus\">DISQUS</span></a>", "RSS_PATH": "", "title": "Akka 2.0 \u7b46\u8a18(6) - Dispatcher \u7684\u8a2d\u5b9a", "SEARCH_FORM": "", "message_Tags": "Tags", "INDEX_PATH": "", "BLOG_AUTHOR": "Swind", "message_Older posts": "Older posts", "OUTPUT_FOLDER": "output", "message_Original site": "Original site", "ANALYTICS": "UA-15910682-2", "BLOG_EMAIL": "", "message_Posts for year %s": "Posts for year %s", "message_old posts page %d": "old posts page %d", "BLOG_TITLE": "Corleonis", "message_Posted": "Posted", "GALLERY_PATH": "galleries", "CODE_COLOR_SCHEME": "default", "message_Read in English": "Read in English", "CACHE_FOLDER": "cache", "tags": [{"link": "/categories/scala.html", "name": "Scala"}, {"link": "/categories/akka.html", "name": "Akka"}], "tags?": true, "__file__": "conf.pyc", "translations": [], "CONTENT_FOOTER": "Contents &copy; 2013 <a href=\"mailto:\">Swind</a> - Powered by <a href=\"http://nikola.ralsina.com.ar\">Nikola</a>", "BASE_URL": "http://swind.code-life.info", "THEME": "mySite", "message_Also available in": "Also available in", "BLOG_URL": "http://swind.code-life.info", "date": "2012-06-17 20:19", "__name__": "conf", "message_Posts about %s": "Posts about %s", "message_Posts for {month} {year}": "Posts for {month} {year}", "message_More posts about": "More posts about", "ARCHIVE_PATH": "", "DATE_FORMAT": "%Y-%m-%d %H:%M", "TAG_PATH": "categories", "prev": "/posts/akka-2_0-note-5.json", "message_Newer posts": "Newer posts", "message_LANGUAGE": "English", "MATHJAX_CONFIG": "", "message_Archive": "Archive", "message_Source": "Source", "DISQUS_FORUM": "swindgithub", "INDEXES_TITLE": ""}