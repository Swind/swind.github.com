<!DOCTYPE html>
<html lang="zh">
  <head>
    <meta charset="utf-8">
    <title>用 Spray 建立一個簡單的 RESTful API Server</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link rel="stylesheet" href="./theme/css/bootstrap.css" type="text/css" />
    <style type="text/css">
      body {
        padding-top: 60px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
      .tag-1 {
        font-size: 13pt;
      }
      .tag-2 {
        font-size: 10pt;
      }
      .tag-2 {
        font-size: 8pt;
      }
      .tag-4 {
        font-size: 6pt;
     }
    </style>
	<link href="./theme/css/bootstrap_custom.css" rel="stylesheet" type="text/css" />
    <link href="./theme/css/monokai.css" rel="stylesheet" type="text/css"/>
	<link href="./theme/css/font-awesome.css" rel="stylesheet"/>

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="./theme/images/favicon.ico">
    <link rel="apple-touch-icon" href="./theme/images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="./theme/images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="./theme/images/apple-touch-icon-114x114.png">

    <link href="./" type="application/atom+xml" rel="alternate" title="Corleonis ATOM Feed" />
    
    <link href="./feeds/all.rss.xml" type="application/atom+xml" rel="alternate" title="Corleonis RSS Feed" />
    

  </head>

  <body>

    <!-- Navbar -->
    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse"/>
          <a class="brand" href="./index.html">Corleonis </a>
          <div class="nav-collapse">
            <ul class="nav">
              
              
              
              <li class="divider-vertical"></li>
              
              
              <li >
                <a href="./category/fun.html">
                  <i class="icon-folder-open icon-large"></i>Fun
                </a>
              </li>
              
              <li class="active">
                <a href="./category/program.html">
                  <i class="icon-folder-open icon-large"></i>Program
                </a>
              </li>
              
              
              <ul class="nav pull-right">
                <li><a href="./archives.html"><i class="icon-th-list"></i>Archives</a></li>
              </ul>
              
            </ul>
            <!--<p class="navbar-text pull-right">Logged in as <a href="#">username</a></p>-->
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <!-- Post -->
    <div class="container-fluid">

      <div class="row-fluid">
         

        <div class="span2 well sidebar-nav" id="sidebar">
          <ul class="nav nav-list">



<li class="nav-header"><i class="icon-home icon-large"></i> social</li>
	
	<li><a href="./feeds/all.rss.xml" rel="alternate"><i class="icon-bookmark icon-large"></i>rss feed</a></li>
	
	
	
	<li><a href="https://twitter.com/swind"><i class="icon-twitter-sign icon-large"></i>twitter</a></li>
	


<li class="nav-header"><i class="icon-folder-close icon-large"></i>Categories</li>

<li>
<a href="./category/fun.html">
    Fun
</a>
</li>

<li>
<a href="./category/program.html">
    Program
</a>
</li>


<li class="divider"></li>

<li class="nav-header"><i class="icon-tags icon-large"></i>Tags</li>

<li class="tag-3">
    <a href="./tag/java.html">
       Java
    </a>
</li>

<li class="tag-4">
    <a href="./tag/octopres.html">
       octopres
    </a>
</li>

<li class="tag-1">
    <a href="./tag/scala.html">
       Scala
    </a>
</li>

<li class="tag-1">
    <a href="./tag/akka.html">
       Akka
    </a>
</li>






</ul>
        </div><!--/.well -->
        

        <div class="span8" id="content">
          
<section id="content">    
	<article>
		<header>
			<h1>
				<a href=""
					rel="bookmark" 
					title="Permalink to 用 Spray 建立一個簡單的 RESTful API Server">
					用 Spray 建立一個簡單的 RESTful API Server 
				</a>
				 
			</h1> 
		</header>
		<div class="entry-content">
		<div class="well">
			<footer class="post-info">
<span class="badge badge-info">Date</span>
<abbr class="published" title="2012-11-06T20:11:00">
	<i class="icon-calendar"></i>週二 06 十一月 2012
</abbr>

<span class="badge badge-info">By</span>
<a href="./author/swind.html"><i class="icon-user"></i>Swind</a>

<span class="badge badge-info">Category</span>
<a href="./category/program.html"><i class="icon-folder-open"></i>Program</a>. 


	

<span class="badge badge-info">Tags</span> 

	<a href="./tag/scala.html"><i class="icon-tag"></i>Scala</a>

	<a href="./tag/akka.html"><i class="icon-tag"></i>Akka</a>



</footer><!-- /.post-info -->
		</div>
		<div class="section" id="spray">
<h2>Spray</h2>
<p><a class="reference external" href="http://spray.cc/">Spray</a></p>
<p>最初是想要建立一個提供查詢服務的 RESTful API Server，可以讓 Client 的應用程式透過 RESTful API 查詢一些資料。
但是看來看去，用 Play2、Jersey、RESTEasy 等都蠻麻煩的，而且還需要使用 Web container（像 Tomcat、Jetty 等）。
所以才找到這個 Spray，而且又是用 Scala 開發的，實在沒有理由不試試看阿。 XD</p>
<p>若你連到官網看會發現他分成很多模組，老實說我也沒有詳細研究每個模組的功能。
因為 <a class="reference external" href="http://spray.cc/documentation/spray-can/">spray-can</a> 的範例看起來最簡單並且也符合我的需求，所以就直接用他了。</p>
<p>想瞭解更詳細內容的可以參考 <a class="reference external" href="https://github.com/spray/spray/tree/release-1.0-M2/examples/spray-can/simple-http-server/">spray-can 範例文件</a> 與 <a class="reference external" href="http://blog.cloudfoundry.com/2012/05/11/running-standalone-web-applications-on-cloud-foundry/">Running Standalone Web Applications on Cloud Foundry</a></p>
</div>
<div class="section" id="id1">
<h2>環境準備</h2>
<p><a class="reference external" href="https://github.com/spray/spray/tree/release-1.0-M2/examples/spray-can/">spray-can 的範例</a> 已經有建立好一個簡單的 HttpServer 了，
所以我們先將 Spray 從 Github 上 Clone 下來。</p>
<div class="highlight"><pre>git clone git://github.com/spray/spray.git
</pre></div>
<p>然後複製出 spray/examples/spray-can/simple-http-server。
接著在 simple-http-server 底下，建立 build.sbt 讓 SBT 去 include 所需要的 Library。</p>
<p>順便設定 <a class="reference external" href="https://github.com/twitter/sbt-package-dist">package-dist</a>  這個 sbt plugin 所需要的資料。
package-dist 可以協助我們將 Project 所需要的 Library 與程式本身全部打包成一個 zip 檔。
但是這個 plugin 只能使用在 sbt 0.11.x，目前我還沒有看到可以在 0.12.x 的版本。
如果你不想用的話可以拿掉 Start 到 End 中間的內容。</p>
<p>而最下面的</p>
<blockquote>
EclipseKeys.createSrc := EclipseCreateSrc.Default + EclipsCreateSrc.Resource</blockquote>
<p>則是針對 sbteclipse 做的設定，讓 plugin 在產生 eclipse project 的時候可以將 src/main/resources 也加入 source folder。</p>
<div class="highlight"><pre><span class="c1">//Start - For package-dist</span>
<span class="k">import</span> <span class="nn">com.twitter.sbt._</span>

<span class="n">seq</span><span class="o">(</span><span class="nc">PackageDist</span><span class="o">.</span><span class="n">newSettings</span><span class="k">:</span> <span class="k">_</span><span class="kt">*</span><span class="o">)</span>

<span class="n">seq</span><span class="o">(</span><span class="nc">GitProject</span><span class="o">.</span><span class="n">gitSettings</span><span class="k">:</span> <span class="k">_</span><span class="kt">*</span><span class="o">)</span>

<span class="n">packageDistZipName</span> <span class="o">:=</span> <span class="s">&quot;DictionaryServer.zip&quot;</span>
<span class="c1">//End - For package-dist</span>

<span class="n">organization</span> <span class="o">:=</span> <span class="s">&quot;cc.spray&quot;</span>

<span class="n">name</span> <span class="o">:=</span> <span class="s">&quot;DictionaryServer&quot;</span>

<span class="n">mainClass</span> <span class="n">in</span> <span class="o">(</span><span class="nc">Compile</span><span class="o">,</span> <span class="n">packageBin</span><span class="o">)</span> <span class="o">:=</span> <span class="nc">Some</span><span class="o">(</span><span class="s">&quot;cc.spray.example.Main&quot;</span><span class="o">)</span>

<span class="n">version</span> <span class="o">:=</span> <span class="s">&quot;0.1.0-SNAPSHOT&quot;</span>

<span class="n">scalaVersion</span> <span class="o">:=</span> <span class="s">&quot;2.9.2&quot;</span>

<span class="n">resolvers</span> <span class="o">++=</span> <span class="nc">Seq</span><span class="o">(</span>
<span class="s">&quot;Typesafe repo&quot;</span> <span class="n">at</span> <span class="s">&quot;http://repo.typesafe.com/typesafe/releases/&quot;</span><span class="o">,</span>
<span class="s">&quot;spray repo&quot;</span> <span class="n">at</span> <span class="s">&quot;http://repo.spray.cc/&quot;</span>
<span class="o">)</span>

<span class="n">libraryDependencies</span> <span class="o">++=</span> <span class="nc">Seq</span><span class="o">(</span>
    <span class="s">&quot;com.typesafe.akka&quot;</span> <span class="o">%</span> <span class="s">&quot;akka-actor&quot;</span> <span class="o">%</span> <span class="s">&quot;2.0.3&quot;</span><span class="o">,</span>
    <span class="s">&quot;cc.spray&quot;</span> <span class="o">%</span> <span class="s">&quot;spray-server&quot;</span> <span class="o">%</span> <span class="s">&quot;1.0-M2&quot;</span><span class="o">,</span>
    <span class="s">&quot;cc.spray&quot;</span> <span class="o">%</span> <span class="s">&quot;spray-can&quot;</span> <span class="o">%</span> <span class="s">&quot;1.0-M2&quot;</span><span class="o">,</span>
    <span class="s">&quot;org.slf4j&quot;</span> <span class="o">%</span> <span class="s">&quot;slf4j-api&quot;</span> <span class="o">%</span> <span class="s">&quot;1.6.6&quot;</span><span class="o">,</span>
    <span class="s">&quot;ch.qos.logback&quot;</span> <span class="o">%</span> <span class="s">&quot;logback-classic&quot;</span> <span class="o">%</span> <span class="s">&quot;1.0.7&quot;</span>
<span class="o">)</span>

<span class="c1">//sbteclipse setting</span>
<span class="nc">EclipseKeys</span><span class="o">.</span><span class="n">createSrc</span> <span class="o">:=</span> <span class="nc">EclipseCreateSrc</span><span class="o">.</span><span class="nc">Default</span> <span class="o">+</span> <span class="nc">EclipseCreateSrc</span><span class="o">.</span><span class="nc">Resource</span>
</pre></div>
<p>這邊注意一下 Spray 的版本問題，現在最新的 Example 程式碼是針對最新版本的 spray，但他們還沒有正式 release，
並且他們還換了 package name 等，所以我都是使用 1.0-M2 的版本，當然 Library 也是使用 1.0-M2。</p>
<p>到這邊，我們的環境就準備的差不多了。接下來，只要執行範例程式碼就可以有一個可以提供 Web Service 的 Http Server 了。</p>
</div>
<div class="section" id="start-http-server">
<h2>Start Http Server</h2>
<p>如果你對於 Akka 的用法有一點概念的話，那麼 Spray 對你來說應該是非常好上手的。</p>
<p>Main.scala 啟動一個 IoWorker Actor 負責 low-level 的 network I/O，
接下來將 IoWorker Actor 以及 Service Actor 傳入 HttpServer Actor並啟動 Http Server。
之後透過發送一個 HttpServer.Bind 的 Message 給 Server 設定 IP 與 Port。
這樣就完成了 Server 的啟動與設定了。</p>
<div class="highlight"><pre><span class="c1">// we need an ActorSystem to host our application in</span>
<span class="k">val</span> <span class="n">system</span> <span class="k">=</span> <span class="nc">ActorSystem</span><span class="o">(</span><span class="s">&quot;SimpleHttpServer&quot;</span><span class="o">)</span>

<span class="c1">// the handler actor replies to incoming HttpRequests</span>
<span class="k">val</span> <span class="n">handler</span> <span class="k">=</span> <span class="n">system</span><span class="o">.</span><span class="n">actorOf</span><span class="o">(</span><span class="nc">Props</span><span class="o">[</span><span class="kt">TestService</span><span class="o">])</span>

<span class="c1">// every spray-can HttpServer (and HttpClient) needs an IoWorker for low-level network IO</span>
<span class="c1">// (but several servers and/or clients can share one)</span>
<span class="k">val</span> <span class="n">ioWorker</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">IoWorker</span><span class="o">(</span><span class="n">system</span><span class="o">).</span><span class="n">start</span><span class="o">()</span>

<span class="c1">// create and start the spray-can HttpServer, telling it that we want requests to be</span>
<span class="c1">// handled by our singleton handler</span>
<span class="k">val</span> <span class="n">server</span> <span class="k">=</span> <span class="n">system</span><span class="o">.</span><span class="n">actorOf</span><span class="o">(</span>
<span class="n">props</span> <span class="k">=</span> <span class="nc">Props</span><span class="o">(</span><span class="k">new</span> <span class="nc">HttpServer</span><span class="o">(</span><span class="n">ioWorker</span><span class="o">,</span> <span class="nc">MessageHandlerDispatch</span><span class="o">.</span><span class="nc">SingletonHandler</span><span class="o">(</span><span class="n">handler</span><span class="o">))),</span>
<span class="n">name</span> <span class="k">=</span> <span class="s">&quot;http-server&quot;</span>
<span class="o">)</span>

<span class="c1">// a running HttpServer can be bound, unbound and rebound</span>
<span class="c1">// initially to need to tell it where to bind to</span>
<span class="n">server</span> <span class="o">!</span> <span class="nc">HttpServer</span><span class="o">.</span><span class="nc">Bind</span><span class="o">(</span><span class="s">&quot;localhost&quot;</span><span class="o">,</span> <span class="mi">8080</span><span class="o">)</span>

<span class="c1">// finally we drop the main thread but hook the shutdown of</span>
<span class="c1">// our IoWorker into the shutdown of the applications ActorSystem</span>
<span class="n">system</span><span class="o">.</span><span class="n">registerOnTermination</span> <span class="o">{</span>
<span class="n">ioWorker</span><span class="o">.</span><span class="n">stop</span><span class="o">()</span>
<span class="o">}</span>
</pre></div>
</div>
<div class="section" id="service">
<h2>提供 Service</h2>
<div class="section" id="http-request">
<h3>處理 Http Request</h3>
<p>提供 Service 的 Actor 會接收到 HttpRequest 的 Message，HttpRequest 的內容如下。</p>
<div class="highlight"><pre><span class="k">case</span> <span class="k">class</span> <span class="nc">HttpRequest</span><span class="o">(</span>
            <span class="n">method</span>   <span class="k">:</span> <span class="kt">HttpMethod</span> <span class="o">=</span> <span class="nc">HttpMethods</span><span class="o">.</span><span class="nc">GET</span><span class="o">,</span>
            <span class="n">uri</span>      <span class="k">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="s">&quot;/&quot;</span><span class="o">,</span>
            <span class="n">headers</span>  <span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">HttpHeader</span><span class="o">]</span> <span class="k">=</span> <span class="nc">Nil</span><span class="o">,</span>
            <span class="n">content</span>  <span class="k">:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">HttpContent</span><span class="o">]</span> <span class="k">=</span> <span class="nc">None</span><span class="o">,</span>
            <span class="n">protocol</span> <span class="k">:</span> <span class="kt">HttpProtocol</span> <span class="o">=</span> <span class="n">`HTTP/1.1`</span><span class="o">)</span>
</pre></div>
<p>然後就可以利用 match 來處理各種不同的 HttpRequest，
例如有連線到 <a class="reference external" href="http://localhost:8080/">http://localhost:8080/</a> 的 GET 請求，
就會對應到第一個 HttpRequest &quot;/&quot;。</p>
<div class="highlight"><pre><span class="k">protected</span> <span class="k">def</span> <span class="n">receive</span> <span class="k">=</span> <span class="o">{</span>

    <span class="k">case</span> <span class="nc">HttpRequest</span><span class="o">(</span><span class="nc">GET</span><span class="o">,</span> <span class="s">&quot;/&quot;</span><span class="o">,</span> <span class="k">_</span><span class="o">,</span> <span class="k">_</span><span class="o">,</span> <span class="k">_</span><span class="o">)</span> <span class="k">=&gt;</span>
        <span class="n">sender</span> <span class="o">!</span> <span class="n">index</span>

    <span class="k">case</span> <span class="nc">HttpRequest</span><span class="o">(</span><span class="nc">GET</span><span class="o">,</span> <span class="s">&quot;/ping&quot;</span><span class="o">,</span> <span class="k">_</span><span class="o">,</span> <span class="k">_</span><span class="o">,</span> <span class="k">_</span><span class="o">)</span> <span class="k">=&gt;</span>
        <span class="n">sender</span> <span class="o">!</span> <span class="n">response</span><span class="o">(</span><span class="s">&quot;PONG!&quot;</span><span class="o">)</span>

    <span class="k">case</span> <span class="nc">HttpRequest</span><span class="o">(</span><span class="nc">GET</span><span class="o">,</span> <span class="s">&quot;/stats&quot;</span><span class="o">,</span> <span class="k">_</span><span class="o">,</span> <span class="k">_</span><span class="o">,</span> <span class="k">_</span><span class="o">)</span> <span class="k">=&gt;</span>
        <span class="k">val</span> <span class="n">client</span> <span class="k">=</span> <span class="n">sender</span>
        <span class="n">context</span><span class="o">.</span><span class="n">actorFor</span><span class="o">(</span><span class="s">&quot;../http-server&quot;</span><span class="o">).</span><span class="n">ask</span><span class="o">(</span><span class="nc">HttpServer</span><span class="o">.</span><span class="nc">GetStats</span><span class="o">)(</span><span class="mf">1.</span><span class="n">second</span><span class="o">).</span><span class="n">onSuccess</span> <span class="o">{</span>

    <span class="k">case</span> <span class="n">x</span><span class="k">:</span> <span class="kt">HttpServer.Stats</span> <span class="o">=&gt;</span> <span class="n">client</span> <span class="o">!</span> <span class="n">statsPresentation</span><span class="o">(</span><span class="n">x</span><span class="o">)</span>
    <span class="o">}</span>
<span class="o">.</span>
<span class="o">.</span>
<span class="o">.</span>
<span class="o">}</span>
</pre></div>
</div>
<div class="section" id="http-response">
<h3>建立 Http Response</h3>
<p>Response 的內容也非常好設定，以剛剛送回 sender 的 index 為例子，
Spray 使用一個 HttpResonse 的 case class 來代表 Response 的內容。
只要設定好 headers、body 與 status 就可以傳送回去 Sender 了。</p>
<div class="highlight"><pre><span class="k">lazy</span> <span class="k">val</span> <span class="n">index</span> <span class="k">=</span> <span class="nc">HttpResponse</span><span class="o">(</span>
<span class="n">headers</span> <span class="k">=</span> <span class="nc">List</span><span class="o">(</span><span class="nc">HttpHeader</span><span class="o">(</span><span class="s">&quot;Content-Type&quot;</span><span class="o">,</span> <span class="s">&quot;text/html&quot;</span><span class="o">)),</span>
<span class="n">body</span> <span class="k">=</span>
  <span class="o">&lt;</span><span class="n">html</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">body</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="n">h1</span><span class="o">&gt;</span><span class="nc">Say</span> <span class="n">hello</span> <span class="n">to</span> <span class="o">&lt;</span><span class="n">i</span><span class="o">&gt;</span><span class="n">spray</span><span class="o">-</span><span class="n">can</span><span class="o">&lt;/</span><span class="n">i</span><span class="o">&gt;!&lt;/</span><span class="n">h1</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="nc">Defined</span> <span class="n">resources</span><span class="o">:&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="n">ul</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;&lt;</span><span class="n">a</span> <span class="n">href</span><span class="o">=</span><span class="s">&quot;/ping&quot;</span><span class="o">&gt;/</span><span class="n">ping</span><span class="o">&lt;/</span><span class="n">a</span><span class="o">&gt;&lt;/</span><span class="n">li</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;&lt;</span><span class="n">a</span> <span class="n">href</span><span class="o">=</span><span class="s">&quot;/search&quot;</span><span class="o">&gt;/</span><span class="n">search</span><span class="o">&lt;/</span><span class="n">a</span><span class="o">&gt;&lt;/</span><span class="n">li</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;&lt;</span><span class="n">a</span> <span class="n">href</span><span class="o">=</span><span class="s">&quot;/stats&quot;</span><span class="o">&gt;/</span><span class="n">stats</span><span class="o">&lt;/</span><span class="n">a</span><span class="o">&gt;&lt;/</span><span class="n">li</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;&lt;</span><span class="n">a</span> <span class="n">href</span><span class="o">=</span><span class="s">&quot;/crash&quot;</span><span class="o">&gt;/</span><span class="n">crash</span><span class="o">&lt;/</span><span class="n">a</span><span class="o">&gt;&lt;/</span><span class="n">li</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;&lt;</span><span class="n">a</span> <span class="n">href</span><span class="o">=</span><span class="s">&quot;/timeout&quot;</span><span class="o">&gt;/</span><span class="n">timeout</span><span class="o">&lt;/</span><span class="n">a</span><span class="o">&gt;&lt;/</span><span class="n">li</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;&lt;</span><span class="n">a</span> <span class="n">href</span><span class="o">=</span><span class="s">&quot;/timeout/timeout&quot;</span><span class="o">&gt;/</span><span class="n">timeout</span><span class="o">/</span><span class="n">timeout</span><span class="o">&lt;/</span><span class="n">a</span><span class="o">&gt;&lt;/</span><span class="n">li</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;&lt;</span><span class="n">a</span> <span class="n">href</span><span class="o">=</span><span class="s">&quot;/stop&quot;</span><span class="o">&gt;/</span><span class="n">stop</span><span class="o">&lt;/</span><span class="n">a</span><span class="o">&gt;&lt;/</span><span class="n">li</span><span class="o">&gt;</span>
      <span class="o">&lt;/</span><span class="n">ul</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">body</span><span class="o">&gt;</span>
  <span class="o">&lt;/</span><span class="n">html</span><span class="o">&gt;.</span><span class="n">toString</span><span class="o">.</span><span class="n">getBytes</span><span class="o">(</span><span class="s">&quot;ISO-8859-1&quot;</span><span class="o">),</span>
<span class="n">status</span> <span class="k">=</span> <span class="mi">200</span><span class="o">)</span>
</pre></div>
</div>
</div>

		</div><!-- /.entry-content -->
		
		<div class="comments">
		<h2>Comments !</h2>
			<div id="disqus_thread"></div>
			<script type="text/javascript">
			   var disqus_identifier = "yong-spray-jian-li-ge-jian-dan-de-restful-api-server.html";
			   (function() {
				var dsq = document.createElement('script'); 
				dsq.type = 'text/javascript'; dsq.async = true;
				dsq.src = 'http://swindgithub.disqus.com/embed.js';
				(document.getElementsByTagName('head')[0] || 
				 document.getElementsByTagName('body')[0]).appendChild(dsq);
			  })();
			</script>
		</div>
		
	</article>
</section>

        </div><!--/span-->
      </div><!--/row-->

      <hr>

      <footer>
        <div class="container">
          <div class="row">
            <div class="span8 offset">
              <address id="about">
                Proudly powered by <a href="http://pelican.notmyidea.org/">Pelican <i class="icon-external-link"></i></a>,
                which takes great advantage of <a href="http://python.org">Python <i class="icon-external-link"></i></a>.
              </address><!-- /#about -->

              <p>The theme is from <a href="http://twitter.github.com/bootstrap/">Bootstrap from Twitter <i class="icon-external-link"></i></a>, 
               and <a href="http://fortawesome.github.com/Font-Awesome/">Font-Awesome <i class="icon-external-link"></i></a>, thanks!</p>
             </div>
           </div>
         </div>
       </footer>

     </div><!--/.fluid-container-->


     
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
	var pageTracker = _gat._getTracker("UA-15910682-2");
pageTracker._trackPageview();
} catch(err) {}</script>

     
     
<script type="text/javascript">
    var disqus_shortname = 'swindgithub';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
    


    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="./theme/js/jquery-1.8.3.min.js"></script>
    <script src="./theme/js/bootstrap.min.js"></script>
    
  </body>
  </html>
