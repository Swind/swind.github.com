<!DOCTYPE html><html lang="en"><head><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta charset="utf-8"><meta name="title" content="Linux 指令筆記 | Corleonis"><meta name="description" content="我常用的 Linux&amp; FreeBSD 指令筆記"><meta name="author" content="Swind"><title>Linux 指令筆記 | Corleonis</title><!-- Le styles --><link href="../assets/css/bootstrap.css" rel="stylesheet" type="text/css"><link href="../assets/css/rst.css" rel="stylesheet" type="text/css"><link href="../assets/css/monokai.css" rel="stylesheet" type="text/css"><link href="../assets/css/colorbox.css" rel="stylesheet" type="text/css"><link href="../assets/css/slides.css" rel="stylesheet" type="text/css"><link href="../assets/css/theme.css" rel="stylesheet" type="text/css"><link href="../assets/css/bootstrap-responsive.css" rel="stylesheet" type="text/css"><script src="../assets/js/jquery-1.7.2.min.js" type="text/javascript"></script><script src="../assets/js/jquery.colorbox-min.js" type="text/javascript"></script><script src="../assets/js/slides.min.jquery.js" type="text/javascript"></script><script src="../assets/js/bootstrap.min.js" type="text/javascript"></script><!-- Le HTML5 shim, for IE6-8 support of HTML5 elements --><!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js" type="text/javascript"></script>
    <![endif]--><link rel="alternate" type="application/rss+xml" title="RSS (en)" href="../rss.xml"></head><body>
<!-- Menubar -->
<div class="navbar navbar-fixed-top">
    <div class="navbar-inner">
        <div class="container">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
        </a>        
        
            <a class="brand" href="../">
            Corleonis
            </a>
            <!-- Everything you want hidden at 940px or less, place within here -->
            <div class="nav-collapse collapse">
                <ul class="nav"><li><a href="../archive.html">Archives</a>
            </li><li><a href="../categories/index.html">Tags</a>
            </li><li class="active"><a href="#">Linux 筆記</a>

                </li></ul><!-- Custom search --><form method="get" id="search" action="http://duckduckgo.com/" class="navbar-form pull-right">
<input type="hidden" name="sites" value="http://swind.code-life.info"><input type="hidden" name="k8" value="#444444"><input type="hidden" name="k9" value="#D51920"><input type="hidden" name="kt" value="h"><input type="text" name="q" maxlength="255" placeholder="Search…" class="span2"><input type="submit" value="DuckDuckGo Search" style="visibility: hidden;"></form>
<!-- End of custom search -->

                <ul class="nav pull-right"><li>
    <a href="linux-note.rst">Source</a>
    </li>

                </ul></div>
        </div>
    </div>
</div>
<!-- End of Menubar -->
<div class="container-fluid" id="container-fluid">
    <!--Body content-->
    <div class="row-fluid">
    <div class="span2"></div>
    <div class="span8">
    
    <h1>Linux 指令筆記</h1>
    <!-- title: Linux 指令筆記 -->
<!-- slug: linux-note -->
<!-- date: 2013/01/20 10:16:20 -->
<!-- tags: Linux -->
<!-- link: -->
<!-- description: 我常用的 Linux& FreeBSD 指令筆記 -->
<div class="contents alert alert-info pull-right topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple"><li><a class="reference internal" href="linux-note.html#git" id="id2">Git</a><ul><li><a class="reference internal" href="linux-note.html#log" id="id3">漂亮一點的 log 顯示方式</a></li>
<li><a class="reference internal" href="linux-note.html#submodule-git-pull" id="id4">讓所有 submodule 執行 git pull</a></li>
<li><a class="reference internal" href="linux-note.html#submodule-checkout-master" id="id5">所有 submodule checkout master</a></li>
</ul></li>
<li><a class="reference internal" href="linux-note.html#sg3-utils" id="id6">sg3 utils</a></li>
<li><a class="reference internal" href="linux-note.html#linux" id="id7">Linux 系統設定</a></li>
<li><a class="reference internal" href="linux-note.html#eclipse" id="id8">Eclipse 相關</a></li>
<li><a class="reference internal" href="linux-note.html#gdb" id="id9">GDB</a></li>
<li><a class="reference internal" href="linux-note.html#vim" id="id10">VIM</a></li>
<li><a class="reference internal" href="linux-note.html#tmux-the-terminal-multiplexer" id="id11">tmux - The Terminal Multiplexer</a></li>
<li><a class="reference internal" href="linux-note.html#cmake" id="id12">CMake</a><ul><li><a class="reference internal" href="linux-note.html#cmakelists-txt-src-tests" id="id13">建立在最上層的 CMakeLists.txt，底下有 src 與 tests 分別放置原始碼與測試程式碼</a></li>
<li><a class="reference internal" href="linux-note.html#src-cmakelists-txt" id="id14">在 src 底下的 CMakeLists.txt</a></li>
<li><a class="reference internal" href="linux-note.html#tests-cmakelists-txt" id="id15">在 tests 底下的 CMakeLists.txt</a></li>
</ul></li>
</ul></div>
<div class="section" id="git">
<h2><a class="toc-backref" href="linux-note.html#id2">Git</a></h2>
<div class="section" id="log">
<h3><a class="toc-backref" href="linux-note.html#id3">漂亮一點的 log 顯示方式</a></h3>
<pre class="code bash literal-block">
git config --global alias.lg <span class="s2">"log --color --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)&lt;%an&gt;%Creset' --abbrev-commit --"</span>
</pre>
<p>出處 <a class="reference external" href="http://coolshell.cn/articles/7755.html">酷殼 - Coolbash.cn - Git 顯示漂亮日誌的小技巧</a></p>
</div>
<div class="section" id="submodule-git-pull">
<h3><a class="toc-backref" href="linux-note.html#id4">讓所有 submodule 執行 git pull</a></h3>
<pre class="code bash literal-block">
git submodule foreach git pull
</pre>
</div>
<div class="section" id="submodule-checkout-master">
<h3><a class="toc-backref" href="linux-note.html#id5">所有 submodule checkout master</a></h3>
<pre class="code bash literal-block">
git submodule foreach git checkout master
</pre>
</div>
</div>
<div class="section" id="sg3-utils">
<h2><a class="toc-backref" href="linux-note.html#id6">sg3 utils</a></h2>
<p><strong>列出所有 scsi 硬體</strong></p>
<pre class="code bash literal-block">
sg_scan
</pre>
<p><strong>讀檔案</strong></p>
<pre class="code bash literal-block">
sg_raw.exe -v -r 512 –o read512byte.txt PD3 28 00 00 00 03 00 00 00 01 00
</pre>
<p><strong>寫檔案</strong></p>
<p>其中 wdata512byte 是事先寫好的一個檔案，後面的 01 代表的是要寫的 sector 數量。</p>
<pre class="code bash literal-block">
sg_raw -v -s 512 PD3 2a 00 00 00 01 00 00 00 01 00 &lt; wdata512byte
</pre>
</div>
<div class="section" id="linux">
<h2><a class="toc-backref" href="linux-note.html#id7">Linux 系統設定</a></h2>
<p><strong>SSH login without password</strong></p>
<pre class="code bash literal-block">
<span class="c">#!/bin/bash
</span>
<span class="k">if</span> <span class="o">[</span> -f ~/.ssh/id_rsa.pub 0 <span class="o">]</span>
<span class="k">then
        </span><span class="nv">account</span><span class="o">=</span><span class="nv">$1</span>
        <span class="nv">ip</span><span class="o">=</span><span class="nv">$2</span>
        ssh-keygen -t rsa
        ssh <span class="nv">$account</span>@<span class="nv">$ip</span> mkdir -p .ssh
        cat ~/.ssh/id_rsa.pub | ssh <span class="nv">$account</span>@<span class="nv">$ip</span> <span class="s1">'cat &gt;&gt; ~/.ssh/authorized_keys'</span>
<span class="k">fi</span>
</pre>
<p><strong>使用 rz 與 sz</strong></p>
<pre class="code bash literal-block">
yum install lrzsz
</pre>
<p><strong>判斷 Linux 發行版本</strong></p>
<pre class="code bash literal-block">
cat /etc/issue
</pre>
</div>
<div class="section" id="eclipse">
<h2><a class="toc-backref" href="linux-note.html#id8">Eclipse 相關</a></h2>
<p><strong>搜尋</strong></p>
<blockquote>
<p>Shift + Ctrl + T 可以搜尋 Class</p>
<p>Shift + Ctrl + R 可以搜尋檔案</p>
</blockquote>
<p><strong>改變選擇之後會把相同名稱的選擇起來的功能的顏色</strong></p>
<blockquote>
Mark occurences</blockquote>
<p>修改的地方在</p>
<blockquote>
Preferences &gt; General &gt; Editors &gt; Text Editors &gt; Annotations</blockquote>
</div>
<div class="section" id="gdb">
<h2><a class="toc-backref" href="linux-note.html#id9">GDB</a></h2>
<p><strong>使用 gdb 觀看 core file 資訊</strong></p>
<blockquote>
gdb -c &lt;corefile&gt; &lt;execfile&gt;</blockquote>
<p><strong>顯示所有 thread</strong></p>
<blockquote>
info threads</blockquote>
<p><strong>進入某個 thread</strong></p>
<blockquote>
thread &lt;thread number&gt;</blockquote>
</div>
<div class="section" id="vim">
<h2><a class="toc-backref" href="linux-note.html#id10">VIM</a></h2>
<p><strong>避免在 paste 的時候觸發 tab 功能</strong></p>
<blockquote>
set paste</blockquote>
<p>vgod 有作個快速鍵 <strong>, + p</strong></p>
</div>
<div class="section" id="tmux-the-terminal-multiplexer">
<h2><a class="toc-backref" href="linux-note.html#id11">tmux - The Terminal Multiplexer</a></h2>
<ul class="simple"><li>官網 <a class="reference external" href="http://tmux.sourceforge.net/">http://tmux.sourceforge.net/</a></li>
<li>設定檔 <a class="reference external" href="https://github.com/Swind/linux-config/blob/master/.tmux.conf">https://github.com/Swind/linux-config/blob/master/.tmux.conf</a></li>
</ul><p><strong>指令</strong></p>
<pre class="code bash literal-block">
tmux        <span class="c">#啟動 tmux 並且建立新的 Session
</span>tmux attach <span class="c">#連線到已經存在的 Session</span>
</pre>
<p><strong>熱鍵</strong></p>
<table border="1" class="docutils"><colgroup><col width="34%"><col width="34%"><col width="31%"></colgroup><thead valign="bottom"><tr><th class="head">Ctrl + a</th>
<th class="head" colspan="2">啟動熱鍵</th>
</tr></thead><tbody valign="top"><tr><td>n</td>
<td colspan="2">下一個視窗</td>
</tr><tr><td>p</td>
<td colspan="2">上一個視窗</td>
</tr><tr><td>|</td>
<td colspan="2">在前後兩個視窗移動</td>
</tr><tr><td>c</td>
<td colspan="2">建立新視窗</td>
</tr><tr><td>&amp;</td>
<td colspan="2">關閉視窗</td>
</tr></tbody></table></div>
<div class="section" id="cmake">
<h2><a class="toc-backref" href="linux-note.html#id12">CMake</a></h2>
<div class="section" id="cmakelists-txt-src-tests">
<h3><a class="toc-backref" href="linux-note.html#id13">建立在最上層的 CMakeLists.txt，底下有 src 與 tests 分別放置原始碼與測試程式碼</a></h3>
<pre class="code cmake literal-block">
<span class="nb">project</span><span class="p">(</span><span class="s">ProjectName</span><span class="p">)</span>

<span class="nb">set</span><span class="p">(</span><span class="s">ProjectName_version_major</span> <span class="s">0</span><span class="p">)</span>
<span class="nb">set</span><span class="p">(</span><span class="s">ProjectName_version_minor</span> <span class="s">1</span><span class="p">)</span>

<span class="nb">set</span><span class="p">(</span><span class="s">CMAKE_VERBOSE_MAKEFILE</span> <span class="s">OFF</span><span class="p">)</span> <span class="c">#Show all compile message
</span>
<span class="c"># 2.6.3 is needed for ctest support
</span><span class="nb">cmake_minimum_required</span><span class="p">(</span><span class="s">VERSION</span> <span class="s">2.6.3</span><span class="p">)</span>

<span class="nb">link_directories</span><span class="p">(</span><span class="s2">"/usr/local/lib"</span><span class="p">)</span>

<span class="c">#CMake Config
</span><span class="nb">set</span> <span class="p">(</span><span class="s">CMAKE_C_COMPILER</span> <span class="s2">"/usr/bin/clang"</span><span class="p">)</span>      <span class="c">#Use Clang as C default compiler
</span><span class="nb">set</span> <span class="p">(</span><span class="s">CMAKE_CXX_COMPILER</span> <span class="s2">"/usr/bin/clang++"</span><span class="p">)</span>  <span class="c">#Use Clang++ as C++ default compiler
</span>
<span class="nb">set</span> <span class="p">(</span><span class="s">CMAKE_MODULE_PATH</span> <span class="o">${</span><span class="nv">CMAKE_MODULE_PATH</span><span class="o">}</span> <span class="s2">"${CMAKE_SOURCE_DIR}/CMakeModules/"</span><span class="p">)</span>
<span class="nb">enable_testing</span><span class="p">()</span>

<span class="nb">add_subdirectory</span><span class="p">(</span><span class="s">src</span><span class="p">)</span>
<span class="nb">add_subdirectory</span><span class="p">(</span><span class="s">tests</span><span class="p">)</span>

<span class="c"># Show the environment variables
</span><span class="nb">message</span><span class="p">(</span><span class="s2">"
-------------------------------------------------------
ProjectName Version ${ProjectName_version_major}.${ProjectName_version_minor}

Current compiler options:
    CC:                                 ${CMAKE_C_COMPILER}
    CXX:                                ${CMAKE_CXX_COMPILER}
    CFLAGS:                             ${CPPUTEST_C_FLAGS}
    CXXFLAGS:                           ${CPPUTEST_CXX_FLAGS}
    LDFLAGS:                            ${CPPUTEST_LD_FLAGS}

Porject Information:
    Project Name:                       ${PROJECT_NAME}
    Project Source Dir:                 ${PROJECT_SOURCE_DIR}
    Project Binary Dir:                 ${PROJECT_BINARY_DIR}
-------------------------------------------------------
"</span><span class="p">)</span>
</pre>
</div>
<div class="section" id="src-cmakelists-txt">
<h3><a class="toc-backref" href="linux-note.html#id14">在 src 底下的 CMakeLists.txt</a></h3>
<pre class="code cmake literal-block">
<span class="nb">set</span><span class="p">(</span><span class="s">CMAKE_VERBOSE_MAKEFILE</span> <span class="s">ON</span><span class="p">)</span> <span class="c">#Show all compile message
</span>
<span class="nb">set</span><span class="p">(</span><span class="s">CMAKE_C_FLAGS</span> <span class="s2">"${CMAKE_C_FLAGS} -Wall -Werror"</span><span class="p">)</span>

<span class="nb">SUBDIRS</span><span class="p">(</span><span class="s">subdirs</span><span class="p">)</span>

<span class="nb">INCLUDE_DIRECTORIES</span><span class="p">(</span><span class="s">./subdirs</span><span class="p">)</span>

<span class="c">#Use Google Performance Tools
</span><span class="nb">FIND_PACKAGE</span><span class="p">(</span><span class="s">GooglePerfTools</span> <span class="s">REQUIRED</span><span class="p">)</span>
<span class="nb">include_directories</span><span class="p">(</span><span class="o">${</span><span class="nv">GOOGLE_PERFTOOLS_INCLUDE_DIR</span><span class="o">}</span><span class="p">)</span>

<span class="nb">SET</span><span class="p">(</span><span class="s">sub_modules</span>
        <span class="s">sub_modules.c</span>
<span class="p">)</span>

<span class="nb">SET</span><span class="p">(</span><span class="s">LinkLibraries</span>
        <span class="s">sub_modules</span>
    <span class="p">)</span>

<span class="nb">ADD_EXECUTABLE</span><span class="p">(</span><span class="s">iscsid</span> <span class="o">${</span><span class="nv">sub_modules</span><span class="o">}</span><span class="p">)</span>
<span class="nb">ADD_LIBRARY</span><span class="p">(</span><span class="s">iscsi_test</span> <span class="o">${</span><span class="nv">LinkLibraries</span><span class="o">}</span><span class="p">)</span>

<span class="nb">TARGET_LINK_LIBRARIES</span><span class="p">(</span><span class="s">iscsid</span> <span class="o">${</span><span class="nv">LinkLibraries</span><span class="o">}</span><span class="p">)</span>
</pre>
</div>
<div class="section" id="tests-cmakelists-txt">
<h3><a class="toc-backref" href="linux-note.html#id15">在 tests 底下的 CMakeLists.txt</a></h3>
<pre class="code cmake literal-block">
<span class="c">#Tell cmake there are c and cpp files in this project
</span><span class="nb">project</span><span class="p">(</span><span class="s">UnitTest</span> <span class="s">C</span> <span class="s">CXX</span><span class="p">)</span>

<span class="nb">set</span><span class="p">(</span><span class="s">CMAKE_VERBOSE_MAKEFILE</span> <span class="s">OFF</span><span class="p">)</span>
<span class="nb">cmake_minimum_required</span><span class="p">(</span><span class="s">VERSION</span> <span class="s">2.6.3</span><span class="p">)</span>

<span class="c">#========CMake parameters
</span><span class="nb">enable_testing</span><span class="p">()</span>

<span class="nb">set</span><span class="p">(</span><span class="s">CMAKE_MODULE_PATH</span> <span class="o">${</span><span class="nv">CMAKE_MODULE_PATH</span><span class="o">}</span> <span class="s2">"${CMAKE_SOURCE_DIR}/CMakeModules/"</span><span class="p">)</span>
<span class="nb">set</span><span class="p">(</span><span class="s">CMAKE_C_FLAGS</span> <span class="s2">"${CMAKE_C_FLAGS} -g"</span><span class="p">)</span>

<span class="nb">include_directories</span><span class="p">(</span><span class="s2">"/usr/local/include"</span><span class="p">)</span>
<span class="nb">include_directories</span><span class="p">(</span><span class="s2">"${CMAKE_SOURCE_DIR}/src/config"</span><span class="p">)</span>
<span class="nb">link_directories</span><span class="p">(</span><span class="s2">"/usr/local/lib"</span><span class="p">)</span>

<span class="c">#========Add libraries
</span>
<span class="nb">SET</span><span class="p">(</span><span class="s">LIBS</span>
        <span class="o">${</span><span class="nv">LIBS</span><span class="o">}</span>
        <span class="o">${</span><span class="nv">CHECK_LIBRARIES</span><span class="o">}</span>
        <span class="s">pthread</span>

    <span class="s">SOURCE</span>
        <span class="s">source_modules</span>

    <span class="s">TEST</span>
        <span class="s">test_modules</span>
<span class="p">)</span>

<span class="nb">set</span><span class="p">(</span><span class="s">SOURCE</span>
    <span class="s">CppUTestExample.cpp</span>
<span class="p">)</span>

<span class="nb">include_directories</span><span class="p">(</span><span class="s">.</span> <span class="s">../src/sub_modules</span><span class="p">)</span>
<span class="nb">INCLUDE_DIRECTORIES</span><span class="p">(</span><span class="s">.</span><span class="p">)</span>

<span class="nb">add_executable</span><span class="p">(</span><span class="s">Runner</span> <span class="o">${</span><span class="nv">SOURCE</span><span class="o">}</span><span class="p">)</span>
<span class="nb">target_link_libraries</span><span class="p">(</span><span class="s">Runner</span> <span class="o">${</span><span class="nv">LIBS</span><span class="o">}</span><span class="p">)</span>

<span class="nb">add_test</span><span class="p">(</span><span class="s">Runner</span> <span class="o">${</span><span class="nv">CMAKE_CURRENT_BINARY_DIR</span><span class="o">}</span><span class="s">/Runner</span><span class="p">)</span>
</pre>
</div>
</div>

    </div>
    </div> 
    <!--End of body content-->
</div>

<div class="footerbox">
    Contents © 2013 <a href="mailto:">Swind</a> - Powered by <a href="http://nikola.ralsina.com.ar">Nikola</a>
</div>

   
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-42855873-1', 'code-life.info');
  ga('send', 'pageview');

</script><script type="text/javascript">jQuery("a.image-reference").colorbox({rel:"gal",maxWidth:"80%",maxHeight:"80%",scalePhotos:true});</script></body></html>